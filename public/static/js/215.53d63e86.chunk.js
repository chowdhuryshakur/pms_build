(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[215],{2158:function(e,t,a){"use strict";a.r(t);var s=a(21),c=a(523),r=a.n(c),n=a(1),o=a(533),i=a(15),l=a(476),d=a(608),u=a(683),j=a(466),b=a(128),m=a(1062),g=(a(657),a(471)),p=a(56),h=a.n(p),O=a(0),f=a(1420),x=a(546),v=a(125),N=a(651),y=a(451),k=a(121),w=a(1064),C=a(465),S=a(467),M=a(461),P=a(484),T=a(475),B=a(1341),I=a(479),z=a(1368),E=a(446),H=a(477),R=a(86),F=a(456),L=a(6),A=function(e){var t=e.name,a=e.role;return Object(L.jsxs)(O.Fragment,{children:[Object(L.jsx)("div",{className:"toastify-header",children:Object(L.jsxs)("div",{className:"title-wrapper",children:[Object(L.jsx)(l.a,{size:"sm",color:"success",icon:Object(L.jsx)(f.a,{size:12})}),Object(L.jsxs)("h6",{className:"toast-title font-weight-bold",children:["Welcome, ",t]})]})}),Object(L.jsx)("div",{className:"toastify-body",children:Object(L.jsxs)("span",{children:["You have successfully logged in as an ",a," user to system. Now you can start to explore. Enjoy!"]})})]})};t.default=function(e){var t,c=Object(u.a)(),l=Object(i.a)(c,2),p=l[0],f=(l[1],Object(O.useContext)(b.a)),D=Object(v.b)(),J=Object(N.g)(),V=Object(O.useState)(""),q=Object(i.a)(V,2),W=(q[0],q[1]),_=Object(O.useState)(""),Y=Object(i.a)(_,2),G=(Y[0],Y[1]),K=Object(O.useState)(!1),Q=Object(i.a)(K,2),U=Q[0],X=Q[1],Z=Object(O.useState)({}),$=Object(i.a)(Z,2),ee=$[0],te=($[1],Object(x.c)()),ae=te.register,se=te.errors,ce=te.handleSubmit;Object(O.useEffect)((function(){fetch("https://api.ipify.org/?format=json").then((function(e){return e.json()})).then((function(e){return localStorage.setItem("ip",e.ip)}))}),[]);var re="dark"===p?"login-v2-dark.svg":"login-v2.svg",ne=a(784)("./".concat(re)).default;return Object(L.jsx)("div",{className:"auth-wrapper auth-v2",children:Object(L.jsxs)(C.a,{className:"auth-inner m-0",children:[Object(L.jsxs)(y.b,{className:"brand-logo",to:"/",onClick:function(e){return e.preventDefault()},children:[Object(L.jsx)("img",{width:"50px",src:R.default}),Object(L.jsx)("h2",{style:{color:window.TukitakiThemeColor},className:"brand-text ml-1 mt-1",children:"E-VMS Admin"})]}),Object(L.jsx)(S.a,{className:"d-none d-lg-flex align-items-center p-5",lg:"8",sm:"12",children:Object(L.jsx)("div",{className:"w-100 d-lg-flex align-items-center justify-content-center px-5",children:Object(L.jsx)("img",{className:"img-fluid",src:ne,alt:"Login V2"})})}),Object(L.jsx)(S.a,{className:"d-flex align-items-center auth-bg px-2 p-lg-5",lg:"4",sm:"12",children:Object(L.jsxs)(S.a,{className:"px-xl-2 mx-auto",sm:"8",md:"6",lg:"12",children:[Object(L.jsx)(M.a,{tag:"h2",className:"font-weight-bold mb-1",children:"Welcome to TukiTaki! \ud83d\udc4b"}),Object(L.jsx)(P.a,{className:"mb-2",children:"Please sign-in to your account and start the adventure"}),Object(L.jsxs)(T.a,{className:"auth-login-form mt-2",onSubmit:ce((function(e){var t=e.loginemail,a=e["login-password"];Object(g.e)(se)&&(X(!0),j.a.merchentlogin({mobile:Number(t),password:a}).then(function(){var e=Object(o.a)(r.a.mark((function e(a){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return X(!1),s=Object(n.a)(Object(n.a)({},a.data.payload.user_info),{},{accessToken:a.data.payload.token,refreshToken:a.data.payload.token,extras:{eCommerceCartItemsCount:5},role:"vendor",ability:[{action:"manage",subject:"VENDOR"},{action:"manage",subject:"Auth"}]}),D(Object(m.a)(s)),f.update(s.ability),k.f.success(Object(L.jsx)(A,{name:s.username,role:s.role}),{transition:k.c,hideProgressBar:!0,autoClose:2e3}),j.a.getPMStoken({username:"dddd",module:"kkk"}).then((function(e){localStorage.setItem("PMStoken",e.data.data.access_token),localStorage.setItem("usePMStoken",!1)})).catch((function(e){console.log("getPMStoken",e)})),e.next=8,j.a.customerbusinesslistbymobileno({mobile:Number(t)}).then((function(e){localStorage.setItem("customerBusinesses",JSON.stringify(e.data.payload)),J.push(Object(g.c)(s.role))})).catch((function(e){Object(F.a)(e),console.log(e)}));case 8:localStorage.setItem("BMSCall",!0),j.a.getBMStoken({username:w.d,password:w.c}).then((function(e){localStorage.setItem("BMStoken",e.data.jwtToken),localStorage.setItem("BMSCall",!1)})).catch((function(e){localStorage.setItem("BMSCall",!1),console.log(e)}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X(!1),Object(F.a)(e),console.log(e)})))})),children:[Object(L.jsxs)(B.a,{children:[Object(L.jsx)(I.a,{className:"form-label",for:"login-email",children:"Mobile Number"}),Object(L.jsx)(z.a,{autoFocus:!0,type:"number",id:"login-email",name:"loginemail",placeholder:"Mobile number",onChange:function(e){return W(e.target.value)},className:h()({"is-invalid":se["login-email"]}),innerRef:ae({required:!0,validate:function(e){return""!==e}})})]}),Object(L.jsxs)(B.a,{children:[Object(L.jsx)("div",{className:"d-flex justify-content-between",children:Object(L.jsx)(I.a,{className:"form-label",for:"login-password",children:"Password"})}),Object(L.jsx)(d.a,(t={id:"login-password",name:"login-password",minLength:"6",className:"input-group-merge",onChange:function(e){return G(e.target.value)}},Object(s.a)(t,"className",h()({"is-invalid":se["login-password"]})),Object(s.a)(t,"innerRef",ae({required:!0,validate:function(e){return""!==e&&e.length>5}})),t)),Object(L.jsx)("span",{style:{color:"red"},children:se["login-password"]&&"Password must contain at least 6 characters, including 1 upper case,1 lower case, 1 number and a spatial character"}),Object(L.jsx)("span",{style:{color:"red"},children:ee.password})]}),U?Object(L.jsxs)(E.a.Ripple,{color:"primary",block:!0,disabled:!0,children:[Object(L.jsx)(H.a,{color:"white",size:"sm"}),Object(L.jsx)("span",{className:"ml-50",children:"Loading..."})]}):Object(L.jsx)(E.a.Ripple,{type:"submit",color:"primary",block:!0,children:"Sign in"}),Object(L.jsx)("br",{}),Object(L.jsxs)("p",{className:"text-center",children:["Don't have an account \xa0",Object(L.jsx)(y.b,{to:"/merchantregister",children:"Register"})]}),Object(L.jsx)("div",{className:"divider my-2",children:Object(L.jsx)("div",{className:"divider-text",children:"or"})}),Object(L.jsxs)("p",{className:"text-center",children:["Login as \xa0",Object(L.jsx)(y.b,{to:"/Adminlogin",children:"Admin"})]})]})]})})]})})}},456:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return n}));a(0);var s=a(121),c=function(e){try{var t=e.response;404===t.status||401===t.status||400===t.status||500===t.status?s.f.error(t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):s.f.error("The server is under maintenance",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){s.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},r=function(e){try{var t=e.response;404!==t.status&&401!==t.status&&400!==t.status||s.f.error(t.data.errors?t.data.errors[Object.keys(t.data.errors)[0]]:t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){s.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},n=function(e){var t=e.data.message||"success";s.f.success(t,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},461:function(e,t,a){"use strict";var s=a(14),c=a(20),r=a(0),n=a.n(r),o=a(5),i=a.n(o),l=a(56),d=a.n(l),u=a(78),j={tag:u.tagPropType,className:i.a.string,cssModule:i.a.object},b=function(e){var t=e.className,a=e.cssModule,r=e.tag,o=Object(c.a)(e,["className","cssModule","tag"]),i=Object(u.mapToCssModules)(d()(t,"card-title"),a);return n.a.createElement(r,Object(s.a)({},o,{className:i}))};b.propTypes=j,b.defaultProps={tag:"div"},t.a=b},477:function(e,t,a){"use strict";var s=a(14),c=a(20),r=a(0),n=a.n(r),o=a(5),i=a.n(o),l=a(56),d=a.n(l),u=a(78),j={tag:u.tagPropType,type:i.a.string,size:i.a.string,color:i.a.string,className:i.a.string,cssModule:i.a.object,children:i.a.string},b=function(e){var t=e.className,a=e.cssModule,r=e.type,o=e.size,i=e.color,l=e.children,j=e.tag,b=Object(c.a)(e,["className","cssModule","type","size","color","children","tag"]),m=Object(u.mapToCssModules)(d()(t,!!o&&"spinner-"+r+"-"+o,"spinner-"+r,!!i&&"text-"+i),a);return n.a.createElement(j,Object(s.a)({role:"status"},b,{className:m}),l&&n.a.createElement("span",{className:Object(u.mapToCssModules)("sr-only",a)},l))};b.propTypes=j,b.defaultProps={tag:"div",type:"border",children:"Loading..."},t.a=b},484:function(e,t,a){"use strict";var s=a(14),c=a(20),r=a(0),n=a.n(r),o=a(5),i=a.n(o),l=a(56),d=a.n(l),u=a(78),j={tag:u.tagPropType,className:i.a.string,cssModule:i.a.object},b=function(e){var t=e.className,a=e.cssModule,r=e.tag,o=Object(c.a)(e,["className","cssModule","tag"]),i=Object(u.mapToCssModules)(d()(t,"card-text"),a);return n.a.createElement(r,Object(s.a)({},o,{className:i}))};b.propTypes=j,b.defaultProps={tag:"p"},t.a=b},608:function(e,t,a){"use strict";var s=a(1),c=a(21),r=a(15),n=a(124),o=a(0),i=a(56),l=a.n(i),d=a(1436),u=a(1435),j=a(479),b=a(1366),m=a(1368),g=a(1367),p=a(1104),h=a(6),O=["label","hideIcon","showIcon","visible","className","htmlFor","placeholder","iconSize","inputClassName"],f=function(e){var t=e.label,a=e.hideIcon,i=e.showIcon,f=e.visible,x=e.className,v=e.htmlFor,N=e.placeholder,y=e.iconSize,k=e.inputClassName,w=Object(n.a)(e,O),C=Object(o.useState)(f),S=Object(r.a)(C,2),M=S[0],P=S[1];return Object(h.jsxs)(o.Fragment,{children:[t?Object(h.jsx)(j.a,{for:v,children:t}):null,Object(h.jsxs)(b.a,{className:l()(Object(c.a)({},x,x)),children:[Object(h.jsx)(m.a,Object(s.a)(Object(s.a)({type:!1===M?"password":"text",placeholder:N||"\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7",className:l()(Object(c.a)({},k,k))},t&&v?{id:v}:{}),w)),Object(h.jsx)(g.a,{addonType:"append",onClick:function(){return P(!M)},children:Object(h.jsx)(p.a,{className:"cursor-pointer",children:function(){var e=y||14;return!1===M?a||Object(h.jsx)(d.a,{size:e}):i||Object(h.jsx)(u.a,{size:e})}()})})]})]})};t.a=f,f.defaultProps={visible:!1}}}]);
//# sourceMappingURL=215.53d63e86.chunk.js.map