(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[37],{1939:function(e,t,a){"use strict";a.r(t);var r=a(21),c=a(1),i=a(10),n=a(0),s=a(1164),l=a(495),o=a(471),d=a(479),u=a(476),j=a(463),p=a(473),b=a(472),h=a(995),m=a(491),f=a(1023),O=a(1021),_=a(1022),x=a(520),g=a(474),y=a(992),v=a(504),w=a(485),C=a(496),N=a(122),S=a(534),F=(a(500),a(497)),P=a(511),L=a.n(P),k=a(512),U=a.n(k),D=a(976),I=a(6);U()(L.a);t.default=function(){var e=Object(S.g)(),t=JSON.parse(localStorage.getItem("userData")).role,a=Object(n.useRef)(),P=Object(n.useRef)(),L=Object(n.useRef)(),k=Object(n.useRef)(),U=Object(n.useRef)(),M=Object(n.useRef)(),T=Object(n.useState)(!1),R=Object(i.a)(T,2),q=R[0],B=R[1],E=Object(n.useState)([]),H=Object(i.a)(E,2),A=H[0],V=H[1],z=Object(n.useState)({previewVisible:!1,previewImage:"",previewTitle:"",fileList:[]}),G=Object(i.a)(z,2),J=G[0],K=G[1],Q=Object(n.useState)([]),W=Object(i.a)(Q,2),X=W[0],Y=W[1],Z=Object(n.useState)({previewVisible:!1,previewImage:"",previewTitle:"",fileList:[]}),$=Object(i.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useState)([]),re=Object(i.a)(ae,2),ce=re[0],ie=re[1],ne=Object(n.useState)({previewVisible:!1,previewImage:"",previewTitle:"",fileList:[]}),se=Object(i.a)(ne,2),le=se[0],oe=se[1],de=Object(n.useState)([]),ue=Object(i.a)(de,2),je=ue[0],pe=ue[1],be=Object(n.useState)({previewVisible:!1,previewImage:"",previewTitle:"",fileList:[]}),he=Object(i.a)(be,2),me=he[0],fe=he[1],Oe=Object(n.useState)(!1),_e=Object(i.a)(Oe,2),xe=_e[0],ge=_e[1],ye=Object(n.useState)(""),ve=Object(i.a)(ye,2),we=ve[0],Ce=ve[1],Ne=Object(n.useState)(!1),Se=Object(i.a)(Ne,2),Fe=Se[0],Pe=Se[1],Le=Object(n.useState)([]),ke=Object(i.a)(Le,2),Ue=ke[0],De=ke[1],Ie=Object(n.useState)({property_rent:0,land_lord_id:"",branch_id:"",house_details:"",latitude:0,longitude:0,property_type:"",bed_room:"",bath_room:"",property_image:"",is_gas_certificate:!1,gas_certificate:"",gas_certificate_expire_date:null,is_power_certificate:!1,power_certificate:null,power_certificate_expire_date:null,is_property_insurence_certificate:!1,property_insurence_certificate:null,property_insurence_certificate_expire_date:null}),Me=Object(i.a)(Ie,2),Te=Me[0],Re=Me[1],qe=Object(n.useState)([]),Be=Object(i.a)(qe,2),Ee=Be[0],He=Be[1],Ae=Object(n.useState)([]),Ve=Object(i.a)(Ae,2),ze=Ve[0],Ge=Ve[1];Object(n.useEffect)((function(){C.a.BranchList().then((function(e){console.log(e.data.payload),He(e.data.payload)})).catch((function(e){Object(F.a)(e),console.log(e)})),C.a.landlordList().then((function(e){console.log("landlordList",e.data.payload),Ge(e.data.payload)})).catch((function(e){Object(F.a)(e),console.log(e)}))}),[]);var Je=function(e){Re(Object(c.a)(Object(c.a)({},Te),{},Object(r.a)({},e.target.name,e.target.value)))};return Object(I.jsx)(n.Fragment,{children:Object(I.jsxs)(l.a,{style:{width:"100%"},onSubmit:function(a){if(a.preventDefault(),q)return N.f.error("please wait, image is uploading to the server"),0;if(!A.length)return N.f.error("please upload property image"),0;if(Te.is_gas_certificate&&!X.length)return N.f.error("please upload your gas certificate"),0;if(Te.is_power_certificate&&!ce.length)return N.f.error("please upload your power certificate"),0;if(Te.is_property_insurence_certificate&&!je.length)return N.f.error("please upload your insurance certificate"),0;var r=Te.property_rent,c=Te.land_lord_id,i=Te.branch_id,n=Te.house_details,s=Te.latitude,l=Te.longitude,o=Te.property_type,d=Te.bed_room,u=Te.bath_room,j=Te.is_gas_certificate,p=Te.gas_certificate_expire_date,b=Te.is_power_certificate,h=Te.power_certificate_expire_date,m=Te.is_property_insurence_certificate,f=Te.property_insurence_certificate_expire_date,O=A.length?A[0].url:null,_=j?X[0].url:null,x=b?ce[0].url:null,g=m?je[0].url:null,y=i||Ee[0].id,v={property_rent:Number(r),land_lord_id:c,branch_id:y,house_details:n,latitude:s,longitude:l,property_type:o,bed_room:d,bath_room:u,property_image:O,gas_certificate:_,power_certificate:x,property_insurence_certificate:g,is_gas_certificate:j,gas_certificate_expire_date:p,is_power_certificate:b,power_certificate_expire_date:h,is_property_insurence_certificate:m,property_insurence_certificate_expire_date:f};console.log(v),ge(!0),C.a.createProperty(v).then((function(a){console.log(a),Object(F.b)(a),e.push("/".concat(t,"/MyProperty")),ge(!1)})).catch((function(e){Object(F.a)(e),ge(!1)}))},autoComplete:"off",children:[Object(I.jsxs)(o.a,{children:[Object(I.jsxs)(d.a,{className:"border-bottom",children:[Object(I.jsx)(u.a,{tag:"h4",children:"Create Property"}),Object(I.jsx)(u.a,{tag:"h4",children:Object(I.jsxs)(j.a.Ripple,{color:"primary",onClick:function(a){return e.push("/".concat(t,"/BulkPropertiesUpload"))},children:[Object(I.jsx)(s.a,{size:14,style:{marginTop:"-2px"}}),"\xa0",Object(I.jsx)("span",{children:"Bulk Create"})]})})]}),Object(I.jsxs)(p.a,{className:"row  pt-1",children:["EstateManager"!==t&&Object(I.jsx)(b.a,{md:"4",className:"mt-0",children:Object(I.jsxs)(h.a,{children:[Object(I.jsx)(m.a,{children:"Select a Branch"}),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(v.a,{ref:L,theme:w.g,className:"react-select",classNamePrefix:"select",name:"branch_id",maxMenuHeight:150,onChange:function(e){Re(Object(c.a)(Object(c.a)({},Te),{},{branch_id:e.value}))},options:Ee.map((function(e){return{value:e.id,label:e.branch_name}})),isClearable:!1}),Object(I.jsx)(f.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return L.current.select.focus()},value:Te.branch_id||"",onChange:function(e){return""}})]})," "]})}),Object(I.jsx)(b.a,{md:"4",className:"mt-0",children:Object(I.jsxs)(h.a,{children:[Object(I.jsx)(m.a,{children:"Select a Landlord"}),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(v.a,{ref:k,theme:w.g,className:"react-select",classNamePrefix:"select",name:"land_lord_id",maxMenuHeight:150,onChange:function(e){Re(Object(c.a)(Object(c.a)({},Te),{},{land_lord_id:e.value}))},options:ze.map((function(e){return{value:e.user_id,label:e.full_name}})),isClearable:!1}),Object(I.jsx)(f.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return k.current.select.focus()},value:Te.land_lord_id||"",onChange:function(e){return""}})]})," "]})}),Object(I.jsx)(b.a,{md:"4",className:"mt-0",children:Object(I.jsxs)(h.a,{children:[Object(I.jsx)(m.a,{children:"Select Property Type"}),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(v.a,{ref:U,theme:w.g,className:"react-select",classNamePrefix:"select",name:"property_type",maxMenuHeight:150,onChange:function(e){Re(Object(c.a)(Object(c.a)({},Te),{},{property_type:e.value}))},options:["Flat","Semi-detach","Detach","Terraced","Bungalow","Park home"].map((function(e){return{value:e,label:e}})),isClearable:!1}),Object(I.jsx)(f.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return U.current.select.focus()},value:Te.property_type||"",onChange:function(e){return""}})]})," "]})}),Object(I.jsx)(b.a,{md:"4",className:"mt-0",children:Object(I.jsxs)(h.a,{children:[Object(I.jsx)(m.a,{children:"Select How Many Bedroom"}),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(v.a,{ref:P,theme:w.g,className:"react-select",classNamePrefix:"select",name:"bed_room",maxMenuHeight:150,onChange:function(e){Re(Object(c.a)(Object(c.a)({},Te),{},{bed_room:e.value}))},options:[1,2,3,4,5,6,7,8,9,10].map((function(e){return{value:e,label:e}})),isClearable:!1}),Object(I.jsx)(f.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return P.current.select.focus()},value:Te.bed_room||"",onChange:function(e){return""}})]})," "]})}),Object(I.jsx)(b.a,{md:"4",className:"mt-0",children:Object(I.jsxs)(h.a,{children:[Object(I.jsx)(m.a,{children:"Select How Many Bathroom"}),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(v.a,{ref:a,maxMenuHeight:150,theme:w.g,className:"react-select",classNamePrefix:"select",name:"bath_room",onChange:function(e){Re(Object(c.a)(Object(c.a)({},Te),{},{bath_room:e.value}))},options:[1,2,3,4,5].map((function(e){return{value:e,label:e}})),isClearable:!1}),Object(I.jsx)(f.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return a.current.select.focus()},value:Te.bath_room||"",onChange:function(e){return""}})]})," "]})}),Object(I.jsx)(b.a,{md:"4",className:"mt-0",children:Object(I.jsxs)(h.a,{children:[Object(I.jsx)(m.a,{for:"property_rent",children:"Property Rent"}),Object(I.jsx)(f.a,{required:!0,type:"number",id:"property_rent",name:"property_rent",placeholder:"100",min:1,value:Te.property_rent,onChange:Je})]})}),Object(I.jsxs)(b.a,{md:"6",children:[Object(I.jsx)(m.a,{for:"postcode",children:"Search address by Post Code"}),Object(I.jsxs)(O.a,{children:[Object(I.jsx)(f.a,{type:"text",id:"postcode",name:"postcode",placeholder:"enter a valid postcode",value:we,onChange:function(e){return Ce(e.target.value)}}),Object(I.jsx)(_.a,{addonType:"append",children:Object(I.jsx)(j.a,{color:"primary",outline:!0,type:"button",onClick:function(e){e.preventDefault(),Pe(!0),C.a.ukAddressEndpoint({postcode:we}).then((function(e){console.log(e.data.payload);var t=e.data.payload,a=t.latitude,r=t.longitude;Re(Object(c.a)(Object(c.a)({},Te),{},{latitude:a,longitude:r})),De(e.data.payload.addresses.map((function(e){return"".concat(e.building_number,", ").concat(e.thoroughfare,", ").concat(e.locality,", ").concat(e.town_or_city)}))),Pe(!1)})).catch((function(e){De([]),Pe(!1),Object(F.a)(e)}))},children:Fe?Object(I.jsx)(x.a,{size:"sm"}):"Search"})})]})]}),Object(I.jsxs)(b.a,{md:"6",children:[Object(I.jsx)(m.a,{children:"Address"}),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(v.a,{ref:M,theme:w.g,className:"react-select",maxMenuHeight:150,classNamePrefix:"select",name:"house_details",onChange:function(e){Re(Object(c.a)(Object(c.a)({},Te),{},{house_details:e.value}))},options:Ue.map((function(e){return{value:e,label:e}})),value:{value:Te.house_details,label:Te.house_details},isClearable:!1}),Object(I.jsx)(f.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return M.current.select.focus()},value:Te.house_details||"",onChange:function(e){return""}})]})]}),Object(I.jsxs)(b.a,{md:"12",className:"my-0",children:[Object(I.jsx)(m.a,{children:"Property Image"}),Object(I.jsx)(D.a,{setimgUpLoading:B,state:J,setState:K,fileUrls:A,setFileUrls:V})]})]})]}),Object(I.jsxs)(g.a,{className:"match-height",children:[Object(I.jsx)(b.a,{md:"4",children:Object(I.jsx)(o.a,{children:Object(I.jsxs)(p.a,{children:[Object(I.jsx)(b.a,{md:"12",className:"mt-1",children:Object(I.jsx)(y.a,{type:"checkbox",className:"custom-control-Primary",id:"is_gas_certificate",onChange:function(e){return Re(Object(c.a)(Object(c.a)({},Te),{},{is_gas_certificate:e.target.checked}))},checked:Te.is_gas_certificate,label:"Gas Certified?"})}),Te.is_gas_certificate&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(b.a,{md:"12",className:"mt-1",children:Object(I.jsxs)(h.a,{children:[Object(I.jsx)(m.a,{for:"gas_certificate_expire_date",children:"Gas Certificate Expire Date"}),Object(I.jsx)(f.a,{required:!0,type:"date",min:(new Date).toLocaleDateString("fr-CA"),id:"gas_certificate_expire_date",name:"gas_certificate_expire_date",placeholder:"100",value:Te.gas_certificate_expire_date,onChange:Je})]})}),Object(I.jsxs)(b.a,{md:"12",className:"my-1",children:[Object(I.jsx)(m.a,{children:"Gas Certificate"}),Object(I.jsx)(D.a,{setimgUpLoading:B,state:ee,setState:te,fileUrls:X,setFileUrls:Y})]})]})]})})}),Object(I.jsx)(b.a,{md:"4",children:Object(I.jsx)(o.a,{children:Object(I.jsxs)(p.a,{children:[Object(I.jsx)(b.a,{md:"12",className:"mt-1",children:Object(I.jsx)(y.a,{type:"checkbox",className:"custom-control-Primary",id:"is_power_certificate",onChange:function(e){return Re(Object(c.a)(Object(c.a)({},Te),{},{is_power_certificate:e.target.checked}))},checked:Te.is_power_certificate,label:"Power Certified?"})}),Te.is_power_certificate&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(b.a,{md:"12",className:"mt-1",children:Object(I.jsxs)(h.a,{children:[Object(I.jsx)(m.a,{for:"power_certificate_expire_date",children:"Power Certificate Expire Date"}),Object(I.jsx)(f.a,{required:!0,type:"date",min:(new Date).toLocaleDateString("fr-CA"),id:"power_certificate_expire_date",name:"power_certificate_expire_date",placeholder:"100",value:Te.power_certificate_expire_date,onChange:Je})]})}),Object(I.jsxs)(b.a,{md:"12",className:"my-1",children:[Object(I.jsx)(m.a,{children:"Power Certificate"}),Object(I.jsx)(D.a,{setimgUpLoading:B,state:le,setState:oe,fileUrls:ce,setFileUrls:ie})]})]})]})})}),Object(I.jsx)(b.a,{md:"4",children:Object(I.jsx)(o.a,{children:Object(I.jsxs)(p.a,{children:[Object(I.jsx)(b.a,{md:"12",className:"mt-1",children:Object(I.jsx)(y.a,{type:"checkbox",className:"custom-control-Primary",id:"is_property_insurence_certificate",onChange:function(e){return Re(Object(c.a)(Object(c.a)({},Te),{},{is_property_insurence_certificate:e.target.checked}))},checked:Te.is_property_insurence_certificate,label:"Insurance Certified?"})}),Te.is_property_insurence_certificate&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(b.a,{md:"12",className:"mt-1",children:Object(I.jsxs)(h.a,{children:[Object(I.jsx)(m.a,{for:"property_insurence_certificate_expire_date",children:"Insurance Certificate Expire Date"}),Object(I.jsx)(f.a,{required:!0,type:"date",min:(new Date).toLocaleDateString("fr-CA"),id:"property_insurence_certificate_expire_date",name:"property_insurence_certificate_expire_date",placeholder:"100",value:Te.property_insurence_certificate_expire_date,onChange:Je})]})}),Object(I.jsxs)(b.a,{md:"12",className:"my-1",children:[Object(I.jsx)(m.a,{children:"Insurance Certificate"}),Object(I.jsx)(D.a,{setimgUpLoading:B,state:me,setState:fe,fileUrls:je,setFileUrls:pe})]})]})]})})})]}),Object(I.jsx)(o.a,{children:Object(I.jsx)(g.a,{children:Object(I.jsx)(b.a,{md:"12 text-center",children:Object(I.jsx)(j.a.Ripple,{className:"my-1",color:"primary",type:"submit",disabled:xe,children:xe?Object(I.jsx)(x.a,{size:"sm"}):"Submit"})})})})]})})}},474:function(e,t,a){"use strict";var r=a(15),c=a(20),i=a(0),n=a.n(i),s=a(5),l=a.n(s),o=a(58),d=a.n(o),u=a(80),j=l.a.oneOfType([l.a.number,l.a.string]),p={tag:u.tagPropType,noGutters:l.a.bool,className:l.a.string,cssModule:l.a.object,form:l.a.bool,xs:j,sm:j,md:j,lg:j,xl:j},b={tag:"div",widths:["xs","sm","md","lg","xl"]},h=function(e){var t=e.className,a=e.cssModule,i=e.noGutters,s=e.tag,l=e.form,o=e.widths,j=Object(c.a)(e,["className","cssModule","noGutters","tag","form","widths"]),p=[];o.forEach((function(t,a){var r=e[t];if(delete j[t],r){var c=!a;p.push(c?"row-cols-"+r:"row-cols-"+t+"-"+r)}}));var b=Object(u.mapToCssModules)(d()(t,i?"no-gutters":null,l?"form-row":"row",p),a);return n.a.createElement(s,Object(r.a)({},j,{className:b}))};h.propTypes=p,h.defaultProps=b,t.a=h},976:function(e,t,a){"use strict";var r=a(121),c=a(510),i=a.n(c),n=a(514),s=a(1),l=(a(0),a(979)),o=a(1975),d=(a(556),a(122)),u=a(496),j=a(1053),p=a(497),b=a(500),h=a(6);t.a=function(e){var t=e.fileUrls,a=e.setFileUrls,c=e.state,m=e.setState,f=e.setimgUpLoading;function O(e){return new Promise((function(t,a){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result)},r.onerror=function(e){return a(e)}}))}var _=c.previewVisible,x=c.previewImage,g=c.fileList,y=c.previewTitle,v=function(){var e=Object(n.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,O(t.originFileObj);case 3:t.preview=e.sent;case 4:m(Object(s.a)(Object(s.a)({},c),{},{previewImage:t.url||t.preview,previewVisible:!0,previewTitle:t.name||t.url.substring(t.url.lastIndexOf("/")+1)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=Object(h.jsxs)("div",{className:"text-center p-1",style:{height:"102px",width:"102px"},children:[Object(h.jsx)("span",{children:Object(h.jsx)(j.a,{size:20,className:"my-1"})})," ",Object(h.jsx)("br",{}),Object(h.jsx)("span",{children:"Add Image"})]}),C={beforeUpload:function(e){var c=e.size/1024/1024<2,i="image/jpeg"===e.type||"image/png"===e.type;if(i){if(c){var n=new FormData;return n.append("complain_image",e),f(!0),u.a.singleFileupload(n).then((function(c){f(!1),a([].concat(Object(r.a)(t),[{uid:e.uid,name:"image.png",status:"done",type:"image/jpeg",url:c.data.payload.fileurl}]))})).catch((function(e){f(!1),console.log(e),Object(p.a)(e)})),i&&c}d.f.error("Image must smaller than 2MB!")}else d.f.error("".concat(e.name," is not a Image file"))}};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(l.a,Object(s.a)(Object(s.a)({},C),{},{action:"".concat(b.d,"/api/fackupload"),listType:"picture-card",fileList:g,onPreview:v,onChange:function(e){var r=e.fileList,i=e.file;return i.size/1024/1024>2?0:"image/jpeg"===i.type||"image/png"===i.type?(a(t.filter((function(e){return r.some((function(t){return e.uid===t.uid}))}))),void m(Object(s.a)(Object(s.a)({},c),{},{fileList:r.filter((function(e){return e.type.includes("image")}))}))):0},children:g.length>=1?null:w})),Object(h.jsx)(o.a,{visible:_,title:y,footer:null,onCancel:function(){return m(Object(s.a)(Object(s.a)({},c),{},{previewVisible:!1}))},children:Object(h.jsx)("img",{alt:"example",style:{width:"100%"},src:x})})]})}}}]);
//# sourceMappingURL=37.962463c6.chunk.js.map