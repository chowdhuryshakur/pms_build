(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[250],{2283:function(e,t,a){"use strict";a.r(t);var n=a(21),r=a(15),s=a(0),o=a(1434),c=a(1504),i=a(1371),l=a(472),u=a(468),d=a(460),j=a(446),m=a(459),b=a(465),O=a(467),p=a(451),f=a(466),g=a(455),h=a(481),x=a.n(h),v=a(482),P=a.n(v),S=a(675),C=a(1),D=a(562),y=a(565),k=a(557),R=a(475),N=a(1342),E=a(479),I=a(1369),w=a(476),L=(a(471),a(567)),A=a(6),B=function(e){var t=e.modal,a=e.toggleModal,o=e.overallPointRuleInfo,c=e.setoverallPointRuleInfo,i=e.setReset,l=e.resetData,u=JSON.parse(localStorage.getItem("customerBusinesses")),d=Object(s.useState)(!1),m=Object(r.a)(d,2),b=m[0],p=m[1],h=function(e){c(Object(C.a)(Object(C.a)({},o),{},Object(n.a)({},e.target.name,e.target.value)))};return Object(A.jsxs)(D.a,{isOpen:t,toggle:a,className:"modal-dialog-centered",children:[Object(A.jsx)(y.a,{toggle:a,children:"Edit Point Rule"}),Object(A.jsx)(k.a,{children:Object(A.jsxs)(R.a,{className:"row",style:{width:"100%"},onSubmit:function(e){e.preventDefault();var t=o.Id,n=o.PointRateSetupName,r=o.PurchaseAmount,s=o.Points,c=o.ExpiryDate,d=o.OfferRate,j=o.OfferStartDate,m=o.OfferEndDate;localStorage.setItem("usePMStoken",!0),p(!0);var b=u[0].pms_merchantid;d||(j=null,m=null),f.a.updateOverallRule(b,{rule_id:t,PointRateSetupName:n,PurchaseAmount:r,Points:s,ExpiryDate:c,OfferRate:d,OfferStartDate:j,OfferEndDate:m}).then((function(e){i(!l),p(!1),console.log(e),a(),Object(g.c)(e)})).catch((function(e){p(!1),localStorage.setItem("usePMStoken",!1),Object(g.a)(e),console.log(e)}))},autoComplete:"off",children:[Object(A.jsx)(O.a,{sm:"6",children:Object(A.jsxs)(N.a,{children:[Object(A.jsx)(E.a,{for:"PointRateSetupName",children:"Point Rate Setup Name"}),Object(A.jsx)(I.a,{type:"text",name:"PointRateSetupName",id:"PointRateSetupName",value:o.PointRateSetupName,onChange:h,placeholder:"write a name"})]})}),Object(A.jsx)(O.a,{sm:"6",children:Object(A.jsxs)(N.a,{children:[Object(A.jsx)(E.a,{for:"PurchaseAmount",children:"Purchase Amount"}),Object(A.jsx)(I.a,{type:"number",name:"PurchaseAmount",id:"PurchaseAmount",value:o.PurchaseAmount,onChange:h,placeholder:"0"})]})}),Object(A.jsx)(O.a,{sm:"6",children:Object(A.jsxs)(N.a,{children:[Object(A.jsx)(E.a,{for:"Points",children:"Points"}),Object(A.jsx)(I.a,{type:"number",name:"Points",id:"Points",value:o.Points,onChange:h,placeholder:"0"})]})}),Object(A.jsx)(O.a,{sm:"6",children:Object(A.jsxs)(N.a,{children:[Object(A.jsx)(E.a,{for:"ExpiryDate",children:"Expiry Date"}),Object(A.jsx)(I.a,{type:"date",name:"ExpiryDate",id:"ExpiryDate",value:new Date(o.ExpiryDate).toLocaleDateString("fr-CA"),onChange:h,placeholder:"0"})]})}),Object(A.jsx)(O.a,{sm:"12",className:"mb-1",children:Object(A.jsxs)(N.a,{check:!0,children:[Object(A.jsx)(I.a,{onChange:function(e){e.target.checked?c(Object(C.a)(Object(C.a)({},o),{},{OfferRate:!0})):c(Object(C.a)(Object(C.a)({},o),{},{OfferRate:!1}))},type:"checkbox",id:"viaEmail",checked:o.OfferRate}),Object(A.jsx)(E.a,{for:"viaEmail",check:!0,children:"Offer Rate"})]})}),o.OfferRate?Object(A.jsx)(O.a,{sm:"6",children:Object(A.jsxs)(N.a,{children:[Object(A.jsx)(E.a,{for:"OfferStartDate",children:"Offer Start Date"}),Object(A.jsx)(I.a,{type:"date",name:"OfferStartDate",id:"OfferStartDate",value:new Date(o.OfferStartDate).toLocaleDateString("fr-CA"),onChange:h,placeholder:"0"})]})}):null,o.OfferRate?Object(A.jsx)(O.a,{sm:"6",children:Object(A.jsxs)(N.a,{children:[Object(A.jsx)(E.a,{for:"OfferEndDate",children:"Offer End Date"}),Object(A.jsx)(I.a,{type:"date",name:"OfferEndDate",id:"OfferEndDate",value:new Date(o.OfferEndDate).toLocaleDateString("fr-CA"),onChange:h,placeholder:"0"})]})}):null,Object(A.jsx)(O.a,{sm:"12",className:"text-center",children:b?Object(A.jsxs)(j.a.Ripple,{color:"primary",className:"mr-1",disabled:!0,style:{marginTop:"25px"},children:[Object(A.jsx)(w.a,{color:"white",size:"sm"}),Object(A.jsx)("span",{className:"ml-50",children:"Loading..."})]}):Object(A.jsx)(j.a.Ripple,{className:"ml-2",color:"primary",type:"submit",style:{marginTop:"25px"},children:Object(A.jsx)("span",{children:"Submit"})})})]})})]})},M=P()(x.a);t.default=function(){var e=Object(s.useState)(!0),t=Object(r.a)(e,2),a=t[0],h=t[1],v=Object(s.useState)(!0),P=Object(r.a)(v,2),C=P[0],D=P[1],y=Object(s.useState)([]),k=Object(r.a)(y,2),R=k[0],N=k[1],E=Object(s.useState)({}),I=Object(r.a)(E,2),w=I[0],T=I[1],W=Object(s.useState)(!1),H=Object(r.a)(W,2),z=H[0],_=H[1],J=JSON.parse(localStorage.getItem("customerBusinesses"));Object(s.useEffect)((function(){localStorage.setItem("usePMStoken",!0);var e=J[0].pms_merchantid;f.a.getOverallRules(e).then((function(e){console.log(e),N(e.data.data),localStorage.setItem("usePMStoken",!1),h(!1)})).catch((function(e){Object(g.a)(e),console.log(e),h(!1),localStorage.setItem("usePMStoken",!1)}))}),[C]);var $=[{name:"SL.",minWidth:"100px",sortable:!0,cell:function(e,t){return t+1}},{name:"Point Rate Setup Name",minWidth:"150px",sortable:!0,selector:"PointRateSetupName"},{name:"Purchase Amount",minWidth:"100px",sortable:!0,selector:"PurchaseAmount"},{name:"Points",minWidth:"100px",sortable:!0,selector:"Points"},{name:"Expiry Date",minWidth:"250px",sortable:!0,selector:function(e){return e.ExpiryDate?Object(L.b)(e.ExpiryDate):null}},{name:"Offer Rate",minWidth:"100px",sortable:!0,selector:function(e){return e.OfferRate?"True":"False"}},{name:"Offer Start Date",minWidth:"250px",sortable:!0,selector:function(e){return e.OfferStartDate?Object(L.b)(e.OfferStartDate):null}},{name:"Offer End Date",minWidth:"250px",sortable:!0,selector:function(e){return e.OfferEndDate?Object(L.b)(e.OfferEndDate):null}},{name:"Created At",minWidth:"250px",sortable:!0,selector:function(e){return e.CreatedAt?Object(L.b)(e.CreatedAt):null}},{name:"Action",minWidth:"100px",selector:function(e){return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("span",{title:"Edit",children:Object(A.jsx)(o.a,{size:15,color:"teal",style:{cursor:"pointer"},onClick:function(t){T(e),_(!0)}})}),"\xa0\xa0",Object(A.jsx)("span",{title:"Delete",children:Object(A.jsx)(c.a,{size:15,color:"red",style:{cursor:"pointer"},onClick:function(t){return a=e.Id,r="Do you want to delete?",localStorage.setItem("usePMStoken",!0),M.fire(Object(n.a)({title:r,text:"You won't be able to revert this",icon:"warning",allowOutsideClick:!1,allowEscapeKey:!1,showCancelButton:!0,confirmButtonText:"Yes",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-danger ml-1"},showLoaderOnConfirm:!0,preConfirm:function(){var e=J[0].pms_merchantid,t=parseInt(a);return f.a.deleteOverallRule(e,{rule_id:t}).then((function(e){Object(g.c)(e),console.log(e),N(R.filter((function(e){return e.Id!==a}))),localStorage.setItem("usePMStoken",!1)})).catch((function(e){localStorage.setItem("usePMStoken",!1),console.log(e.response),Object(g.a)(e)}))},buttonsStyling:!1},"allowOutsideClick",(function(){return!x.a.isLoading()}))).then((function(e){e.isConfirmed}));var a,r}})})]})}}];return Object(A.jsxs)(l.a,{children:[Object(A.jsxs)(u.a,{className:"border-bottom",children:[Object(A.jsx)(d.a,{tag:"h4",children:"Global Rules"}),Object(A.jsx)(j.a.Ripple,{className:"ml-2",color:"primary",tag:p.b,to:"/createOverallPointRule",children:Object(A.jsxs)("div",{className:"d-flex align-items-center",children:[Object(A.jsx)(i.a,{size:17,style:{marginRight:"5px"}}),Object(A.jsx)("span",{children:"Create Global Rule"})]})})]}),Object(A.jsxs)(m.a,{children:[Object(A.jsx)(b.a,{children:Object(A.jsx)(O.a,{md:"12",children:Object(A.jsx)(S.a,{column:$,TableData:R,TableDataLoading:a})})}),Object(A.jsx)(B,{toggleModal:function(){return _(!z)},modal:z,resetData:C,setReset:D,overallPointRuleInfo:w,setoverallPointRuleInfo:T})]})]})}},455:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return o}));a(0);var n=a(118),r=function(e){try{var t=e.response;404===t.status||401===t.status||400===t.status||500===t.status?n.f.error(t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):n.f.error("The server is under maintenance",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){n.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},s=function(e){try{var t=e.response;404!==t.status&&401!==t.status&&400!==t.status||n.f.error(t.data.errors?t.data.errors[Object.keys(t.data.errors)[0]]:t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){n.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},o=function(e){var t=e.data.message||"success";n.f.success(t,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},567:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return o}));var n=function(e){return String(e).replace(/^(.{4})(.*)(.{3})$/,"$1 $2 $3")},r={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"},s=function(e){return new Date(e).toLocaleDateString(void 0,r)},o=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},675:function(e,t,a){"use strict";var n=a(21),r=a(15),s=a(0),o=a(1405),c=a(476),i=a(485),l=a.n(i),u=a(492),d=a.n(u),j=a(6);t.a=function(e){var t=e.column,a=e.TableData,i=e.TableDataLoading,u=Object(s.useState)(0),m=Object(r.a)(u,2),b=m[0],O=m[1];return Object(j.jsx)(s.Fragment,{children:Object(j.jsx)(d.a,{noHeader:!0,pagination:!0,columns:t,paginationPerPage:10,className:"react-dataTable",sortIcon:Object(j.jsx)(o.a,{size:10}),paginationDefaultPage:b+1,paginationComponent:function(){var e;return Object(j.jsx)(l.a,(e={previousLabel:"",nextLabel:"",forcePage:b,onPageChange:function(e){return function(e){O(e.selected)}(e)},pageCount:a.length?a.length/10:1,breakLabel:"...",pageRangeDisplayed:2,marginPagesDisplayed:2,activeClassName:"active",pageClassName:"page-item",breakClassName:"page-item",breakLinkClassName:"page-link",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link"},Object(n.a)(e,"breakClassName","page-item"),Object(n.a)(e,"breakLinkClassName","page-link"),Object(n.a)(e,"containerClassName","pagination react-paginate separated-pagination pagination-sm justify-content-end pr-1 mt-1"),e))},data:a,progressPending:i,progressComponent:Object(j.jsx)(c.a,{color:"primary"}),responsive:!0})})}}}]);
//# sourceMappingURL=250.74547936.chunk.js.map