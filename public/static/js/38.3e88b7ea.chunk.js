(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[38],{1943:function(e,t,a){"use strict";a.r(t);var r=a(21),c=a(1),i=a(10),n=a(0),s=a(1061),l=a(463),o=a(496),d=a(471),u=a(479),p=a(476),j=a(473),b=a(472),m=a(998),_=a(491),f=a(1026),h=a(1024),g=a(1025),O=a(520),x=a(474),y=a(995),v=a(504),w=a(485),C=a(494),N=a(122),S=a(534),P=(a(499),a(497)),F=a(511),L=a.n(F),D=a(512),k=a.n(D),U=a(980),I=a(6);k()(L.a);t.default=function(){var e=Object(S.g)(),t=Object(n.useRef)(),a=Object(n.useRef)(),F=Object(n.useRef)(),L=Object(n.useRef)(),D=Object(n.useRef)(),k=Object(n.useRef)(),M=JSON.parse(localStorage.getItem("userData")).role,T=JSON.parse(localStorage.getItem("EditPropertyInfo")),R=Object(n.useState)(!1),A=Object(i.a)(R,2),q=A[0],E=A[1],H=Object(n.useState)(T.property_image?[{uid:1,name:"image.png",status:"done",type:"image/jpeg",url:T.property_image}]:[]),B=Object(i.a)(H,2),V=B[0],z=B[1],G=Object(n.useState)({previewVisible:!1,previewImage:"",previewTitle:"",fileList:T.property_image?[{uid:1,name:"image.png",status:"done",type:"image/jpeg",url:T.property_image}]:[]}),J=Object(i.a)(G,2),K=J[0],Q=J[1],W=Object(n.useState)(T.gas_certificate?[{uid:11,name:"image.png",status:"done",type:"image/jpeg",url:T.gas_certificate}]:[]),X=Object(i.a)(W,2),Y=X[0],Z=X[1],$=Object(n.useState)({previewVisible:!1,previewImage:"",previewTitle:"",fileList:T.gas_certificate?[{uid:11,name:"image.png",status:"done",type:"image/jpeg",url:T.gas_certificate}]:[]}),ee=Object(i.a)($,2),te=ee[0],ae=ee[1],re=Object(n.useState)(T.power_certificate?[{uid:111,name:"image.png",status:"done",type:"image/jpeg",url:T.power_certificate}]:[]),ce=Object(i.a)(re,2),ie=ce[0],ne=ce[1],se=Object(n.useState)({previewVisible:!1,previewImage:"",previewTitle:"",fileList:T.power_certificate?[{uid:111,name:"image.png",status:"done",type:"image/jpeg",url:T.power_certificate}]:[]}),le=Object(i.a)(se,2),oe=le[0],de=le[1],ue=Object(n.useState)(T.property_insurence_certificate?[{uid:1111,name:"image.png",status:"done",type:"image/jpeg",url:T.property_insurence_certificate}]:[]),pe=Object(i.a)(ue,2),je=pe[0],be=pe[1],me=Object(n.useState)({previewVisible:!1,previewImage:"",previewTitle:"",fileList:T.property_insurence_certificate?[{uid:1111,name:"image.png",status:"done",type:"image/jpeg",url:T.property_insurence_certificate}]:[]}),_e=Object(i.a)(me,2),fe=_e[0],he=_e[1],ge=Object(n.useState)("Select..."),Oe=Object(i.a)(ge,2),xe=Oe[0],ye=Oe[1],ve=Object(n.useState)("Select..."),we=Object(i.a)(ve,2),Ce=we[0],Ne=we[1],Se=Object(n.useState)(!1),Pe=Object(i.a)(Se,2),Fe=Pe[0],Le=Pe[1],De=Object(n.useState)(""),ke=Object(i.a)(De,2),Ue=ke[0],Ie=ke[1],Me=Object(n.useState)(!1),Te=Object(i.a)(Me,2),Re=Te[0],Ae=Te[1],qe=Object(n.useState)([]),Ee=Object(i.a)(qe,2),He=Ee[0],Be=Ee[1],Ve=Object(n.useState)({property_rent:T.property_rent,land_lord_id:T.land_lord_id,branch_id:T.branch_id,house_details:T.house_details,latitude:T.latitude,longitude:T.longitude,property_type:T.property_type,bed_room:T.bed_room,bath_room:T.bath_room,is_gas_certificate:T.is_gas_certificate,gas_certificate_expire_date:new Date(T.gas_certificate_expire_date).toLocaleDateString("fr-CA"),gas_certificate:"",property_image:"",is_power_certificate:T.is_power_certificate,power_certificate_expire_date:new Date(T.power_certificate_expire_date).toLocaleDateString("fr-CA"),is_property_insurence_certificate:T.is_property_insurence_certificate,property_insurence_certificate_expire_date:new Date(T.property_insurence_certificate_expire_date).toLocaleDateString("fr-CA")}),ze=Object(i.a)(Ve,2),Ge=ze[0],Je=ze[1],Ke=Object(n.useState)([]),Qe=Object(i.a)(Ke,2),We=Qe[0],Xe=Qe[1],Ye=Object(n.useState)([]),Ze=Object(i.a)(Ye,2),$e=Ze[0],et=Ze[1];Object(n.useEffect)((function(){C.a.BranchList().then((function(e){ye(e.data.payload.find((function(e){return e.id===T.branch_id})).branch_name),Xe(e.data.payload)})).catch((function(e){Object(P.a)(e),console.log(e)})),C.a.landlordList().then((function(e){Ne(e.data.payload.find((function(e){return e.user_id===T.land_lord_id})).full_name),et(e.data.payload)})).catch((function(e){Object(P.a)(e),console.log(e)}))}),[]);var tt=function(e){Je(Object(c.a)(Object(c.a)({},Ge),{},Object(r.a)({},e.target.name,e.target.value)))};return Object(I.jsxs)(n.Fragment,{children:[Object(I.jsxs)(l.a.Ripple,{className:"m-1",color:"primary",onClick:function(t){return e.push("/".concat(M,"/MyProperty"))},children:[Object(I.jsx)(s.a,{size:12})," Back"]}),Object(I.jsxs)(o.a,{style:{width:"100%"},onSubmit:function(t){if(t.preventDefault(),q)return N.f.error("please wait, image is uploading to the server"),0;if(!V.length)return N.f.error("please upload property image"),0;if(Ge.is_gas_certificate&&!Y.length)return N.f.error("please upload your gas certificate"),0;if(Ge.is_power_certificate&&!ie.length)return N.f.error("please upload your power certificate"),0;if(Ge.is_property_insurence_certificate&&!je.length)return N.f.error("please upload your insurance certificate"),0;var a=Ge.property_rent,r=Ge.land_lord_id,c=Ge.branch_id,i=Ge.house_details,n=(Ge.latitude,Ge.longitude,Ge.property_type),s=Ge.bed_room,l=Ge.bath_room,o=Ge.is_gas_certificate,d=Ge.gas_certificate_expire_date,u=Ge.is_power_certificate,p=Ge.power_certificate_expire_date,j=Ge.is_property_insurence_certificate,b=Ge.property_insurence_certificate_expire_date,m=V.length?V[0].url:null,_=o?Y[0].url:null,f=u?ie[0].url:null,h=j?je[0].url:null,g={id:T.id,property_rent:Number(a),land_lord_id:r,branch_id:c,house_details:i,property_type:n,bed_room:s,bath_room:l,property_image:m,gas_certificate:_,power_certificate:f,property_insurence_certificate:h,is_gas_certificate:o,gas_certificate_expire_date:d,is_power_certificate:u,power_certificate_expire_date:p,is_property_insurence_certificate:j,property_insurence_certificate_expire_date:b};console.log(g),Le(!0),C.a.editProperty(g).then((function(t){console.log(t),Object(P.b)(t),e.push("/".concat(M,"/MyProperty")),Le(!1)})).catch((function(e){Object(P.a)(e),Le(!1)}))},autoComplete:"off",children:[Object(I.jsxs)(d.a,{children:[Object(I.jsx)(u.a,{className:"border-bottom",children:Object(I.jsx)(p.a,{tag:"h4",children:"Update Property"})}),Object(I.jsxs)(j.a,{className:"row pt-1",children:[Object(I.jsx)(b.a,{md:"4",className:"mt-0",children:Object(I.jsxs)(m.a,{children:[Object(I.jsx)(_.a,{children:"Select a Branch"}),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(v.a,{ref:F,theme:w.g,className:"react-select",classNamePrefix:"select",name:"branch_id",maxMenuHeight:150,onChange:function(e){ye(e.label),Je(Object(c.a)(Object(c.a)({},Ge),{},{branch_id:e.value}))},options:We.map((function(e){return{value:e.id,label:e.branch_name}})),value:{value:Ge.branch_id,label:xe},isDisabled:"EstateManager"===M,isClearable:!1}),Object(I.jsx)(f.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return F.current.select.focus()},value:Ge.branch_id||"",onChange:function(e){return""}})]})," "]})}),Object(I.jsx)(b.a,{md:"4",className:"mt-0",children:Object(I.jsxs)(m.a,{children:[Object(I.jsx)(_.a,{children:"Select a Landlord"}),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(v.a,{ref:L,theme:w.g,className:"react-select",classNamePrefix:"select",name:"land_lord_id",maxMenuHeight:150,onChange:function(e){Ne(e.label),Je(Object(c.a)(Object(c.a)({},Ge),{},{land_lord_id:e.value}))},options:$e.map((function(e){return{value:e.user_id,label:e.full_name}})),value:{value:Ge.land_lord_id,label:Ce},isClearable:!1}),Object(I.jsx)(f.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return L.current.select.focus()},value:Ge.land_lord_id||"",onChange:function(e){return""}})]})," "]})}),Object(I.jsx)(b.a,{md:"4",className:"mt-0",children:Object(I.jsxs)(m.a,{children:[Object(I.jsx)(_.a,{children:"Select Property Type"}),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(v.a,{ref:D,theme:w.g,className:"react-select",classNamePrefix:"select",name:"property_type",maxMenuHeight:150,onChange:function(e){Je(Object(c.a)(Object(c.a)({},Ge),{},{property_type:e.value}))},options:["Flat","Semi-detach","Detach","Terraced","Bungalow","Park home"].map((function(e){return{value:e,label:e}})),value:{value:Ge.property_type,label:Ge.property_type},isClearable:!1}),Object(I.jsx)(f.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return D.current.select.focus()},value:Ge.property_type||"",onChange:function(e){return""}})]})," "]})}),Object(I.jsx)(b.a,{md:"4",className:"mt-0",children:Object(I.jsxs)(m.a,{children:[Object(I.jsx)(_.a,{children:"Select How Many Bedroom"}),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(v.a,{ref:a,theme:w.g,className:"react-select",classNamePrefix:"select",name:"bed_room",maxMenuHeight:150,onChange:function(e){Je(Object(c.a)(Object(c.a)({},Ge),{},{bed_room:e.value}))},options:[1,2,3,4,5,6,7,8,9,10].map((function(e){return{value:e,label:e}})),value:{value:Ge.bed_room,label:Ge.bed_room},isClearable:!1}),Object(I.jsx)(f.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return a.current.select.focus()},value:Ge.bed_room||"",onChange:function(e){return""}})]})," "]})}),Object(I.jsx)(b.a,{md:"4",className:"mt-0",children:Object(I.jsxs)(m.a,{children:[Object(I.jsx)(_.a,{children:"Select How Many Bathroom"}),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(v.a,{ref:t,maxMenuHeight:150,theme:w.g,className:"react-select",classNamePrefix:"select",name:"bath_room",onChange:function(e){Je(Object(c.a)(Object(c.a)({},Ge),{},{bath_room:e.value}))},options:[1,2,3,4,5].map((function(e){return{value:e,label:e}})),value:{value:Ge.bath_room,label:Ge.bath_room},isClearable:!1}),Object(I.jsx)(f.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return t.current.select.focus()},value:Ge.bath_room||"",onChange:function(e){return""}})]})," "]})}),Object(I.jsx)(b.a,{md:"4",className:"mt-0",children:Object(I.jsxs)(m.a,{children:[Object(I.jsx)(_.a,{for:"property_rent",children:"Property Rent"}),Object(I.jsx)(f.a,{required:!0,type:"number",id:"property_rent",name:"property_rent",placeholder:"100",min:1,value:Ge.property_rent,onChange:tt})]})}),Object(I.jsxs)(b.a,{md:"6",children:[Object(I.jsx)(_.a,{for:"postcode",children:"Search address by Post Code"}),Object(I.jsxs)(h.a,{children:[Object(I.jsx)(f.a,{type:"text",id:"postcode",name:"postcode",placeholder:"post code",value:Ue,onChange:function(e){return Ie(e.target.value)}}),Object(I.jsx)(g.a,{addonType:"append",children:Object(I.jsx)(l.a,{color:"primary",outline:!0,type:"button",onClick:function(e){e.preventDefault(),Ae(!0),C.a.ukAddressEndpoint({postcode:Ue}).then((function(e){console.log(e.data.payload);var t=e.data.payload,a=t.latitude,r=t.longitude;Je(Object(c.a)(Object(c.a)({},Ge),{},{latitude:a,longitude:r})),Be(e.data.payload.addresses.map((function(e){return"".concat(e.building_number,", ").concat(e.thoroughfare,", ").concat(e.locality,", ").concat(e.town_or_city)}))),Ae(!1)})).catch((function(e){Be([]),Ae(!1),Object(P.a)(e)}))},children:Re?Object(I.jsx)(O.a,{size:"sm"}):"Search"})})]})]}),Object(I.jsxs)(b.a,{md:"6",children:[Object(I.jsx)(_.a,{children:"Address"}),Object(I.jsx)(v.a,{ref:k,theme:w.g,className:"react-select",classNamePrefix:"select",name:"house_details",maxMenuHeight:150,onChange:function(e){Je(Object(c.a)(Object(c.a)({},Ge),{},{house_details:e.value}))},options:He.map((function(e){return{value:e,label:e}})),value:{value:Ge.house_details,label:Ge.house_details},isClearable:!1})]}),Object(I.jsxs)(b.a,{md:"4",className:"my-1",children:[Object(I.jsx)(_.a,{children:"Property Image"}),Object(I.jsx)(U.a,{setimgUpLoading:E,state:K,setState:Q,fileUrls:V,setFileUrls:z})]})]})]}),Object(I.jsxs)(x.a,{className:"match-height",children:[Object(I.jsx)(b.a,{md:"4",children:Object(I.jsx)(d.a,{children:Object(I.jsxs)(j.a,{children:[Object(I.jsx)(b.a,{md:"12",className:"mt-1",children:Object(I.jsx)(y.a,{type:"checkbox",className:"custom-control-Primary",id:"is_gas_certificate",onChange:function(e){return Je(Object(c.a)(Object(c.a)({},Ge),{},{is_gas_certificate:e.target.checked}))},checked:Ge.is_gas_certificate,label:"Gas Certified?"})}),Ge.is_gas_certificate&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(b.a,{md:"12",className:"mt-1",children:Object(I.jsxs)(m.a,{children:[Object(I.jsx)(_.a,{for:"gas_certificate_expire_date",children:"Gas Certificate Expire Date"}),Object(I.jsx)(f.a,{required:!0,type:"date",min:(new Date).toLocaleDateString("fr-CA"),id:"gas_certificate_expire_date",name:"gas_certificate_expire_date",placeholder:"100",value:Ge.gas_certificate_expire_date,onChange:tt})]})}),Object(I.jsxs)(b.a,{md:"12",className:"my-1",children:[Object(I.jsx)(_.a,{children:"Gas Certificate"}),Object(I.jsx)(U.a,{setimgUpLoading:E,state:te,setState:ae,fileUrls:Y,setFileUrls:Z})]})]})]})})}),Object(I.jsx)(b.a,{md:"4",children:Object(I.jsx)(d.a,{children:Object(I.jsxs)(j.a,{children:[Object(I.jsx)(b.a,{md:"12",className:"mt-1",children:Object(I.jsx)(y.a,{type:"checkbox",className:"custom-control-Primary",id:"is_power_certificate",onChange:function(e){return Je(Object(c.a)(Object(c.a)({},Ge),{},{is_power_certificate:e.target.checked}))},checked:Ge.is_power_certificate,label:"Power Certified?"})}),Ge.is_power_certificate&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(b.a,{md:"12",className:"mt-1",children:Object(I.jsxs)(m.a,{children:[Object(I.jsx)(_.a,{for:"power_certificate_expire_date",children:"Power Certificate Expire Date"}),Object(I.jsx)(f.a,{required:!0,type:"date",min:(new Date).toLocaleDateString("fr-CA"),id:"power_certificate_expire_date",name:"power_certificate_expire_date",placeholder:"100",value:Ge.power_certificate_expire_date,onChange:tt})]})}),Object(I.jsxs)(b.a,{md:"12",className:"my-1",children:[Object(I.jsx)(_.a,{children:"Power Certificate"}),Object(I.jsx)(U.a,{setimgUpLoading:E,state:oe,setState:de,fileUrls:ie,setFileUrls:ne})]})]})]})})}),Object(I.jsx)(b.a,{md:"4",children:Object(I.jsx)(d.a,{children:Object(I.jsxs)(j.a,{children:[Object(I.jsx)(b.a,{md:"12",className:"mt-1",children:Object(I.jsx)(y.a,{type:"checkbox",className:"custom-control-Primary",id:"is_property_insurence_certificate",onChange:function(e){return Je(Object(c.a)(Object(c.a)({},Ge),{},{is_property_insurence_certificate:e.target.checked}))},checked:Ge.is_property_insurence_certificate,label:"Insurance Certified?"})}),Ge.is_property_insurence_certificate&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(b.a,{md:"12",className:"mt-1",children:Object(I.jsxs)(m.a,{children:[Object(I.jsx)(_.a,{for:"property_insurence_certificate_expire_date",children:"Insurance Certificate Expire Date"}),Object(I.jsx)(f.a,{required:!0,type:"date",min:(new Date).toLocaleDateString("fr-CA"),id:"property_insurence_certificate_expire_date",name:"property_insurence_certificate_expire_date",placeholder:"100",value:Ge.property_insurence_certificate_expire_date,onChange:tt})]})}),Object(I.jsxs)(b.a,{md:"12",className:"my-1",children:[Object(I.jsx)(_.a,{children:"Insurance Certificate"}),Object(I.jsx)(U.a,{setimgUpLoading:E,state:fe,setState:he,fileUrls:je,setFileUrls:be})]})]})]})})})]}),Object(I.jsx)(d.a,{children:Object(I.jsx)(x.a,{children:Object(I.jsx)(b.a,{md:"12 text-center",children:Object(I.jsx)(l.a.Ripple,{className:"my-1",color:"primary",type:"submit",disabled:Fe,children:Fe?Object(I.jsx)(O.a,{size:"sm"}):"Submit"})})})})]})]})}},474:function(e,t,a){"use strict";var r=a(15),c=a(20),i=a(0),n=a.n(i),s=a(5),l=a.n(s),o=a(58),d=a.n(o),u=a(80),p=l.a.oneOfType([l.a.number,l.a.string]),j={tag:u.tagPropType,noGutters:l.a.bool,className:l.a.string,cssModule:l.a.object,form:l.a.bool,xs:p,sm:p,md:p,lg:p,xl:p},b={tag:"div",widths:["xs","sm","md","lg","xl"]},m=function(e){var t=e.className,a=e.cssModule,i=e.noGutters,s=e.tag,l=e.form,o=e.widths,p=Object(c.a)(e,["className","cssModule","noGutters","tag","form","widths"]),j=[];o.forEach((function(t,a){var r=e[t];if(delete p[t],r){var c=!a;j.push(c?"row-cols-"+r:"row-cols-"+t+"-"+r)}}));var b=Object(u.mapToCssModules)(d()(t,i?"no-gutters":null,l?"form-row":"row",j),a);return n.a.createElement(s,Object(r.a)({},p,{className:b}))};m.propTypes=j,m.defaultProps=b,t.a=m},980:function(e,t,a){"use strict";var r=a(121),c=a(510),i=a.n(c),n=a(514),s=a(1),l=(a(0),a(983)),o=a(1977),d=(a(556),a(122)),u=a(494),p=a(1056),j=a(497),b=a(499),m=a(6);t.a=function(e){var t=e.fileUrls,a=e.setFileUrls,c=e.state,_=e.setState,f=e.setimgUpLoading;function h(e){return new Promise((function(t,a){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result)},r.onerror=function(e){return a(e)}}))}var g=c.previewVisible,O=c.previewImage,x=c.fileList,y=c.previewTitle,v=function(){var e=Object(n.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,h(t.originFileObj);case 3:t.preview=e.sent;case 4:_(Object(s.a)(Object(s.a)({},c),{},{previewImage:t.url||t.preview,previewVisible:!0,previewTitle:t.name||t.url.substring(t.url.lastIndexOf("/")+1)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=Object(m.jsxs)("div",{className:"text-center p-1",style:{height:"102px",width:"102px"},children:[Object(m.jsx)("span",{children:Object(m.jsx)(p.a,{size:20,className:"my-1"})})," ",Object(m.jsx)("br",{}),Object(m.jsx)("span",{children:"Add Image"})]}),C={beforeUpload:function(e){var c=e.size/1024/1024<2,i="image/jpeg"===e.type||"image/png"===e.type;if(i){if(c){var n=new FormData;return n.append("complain_image",e),f(!0),u.a.singleFileupload(n).then((function(c){f(!1),a([].concat(Object(r.a)(t),[{uid:e.uid,name:"image.png",status:"done",type:"image/jpeg",url:c.data.payload.fileurl}]))})).catch((function(e){f(!1),console.log(e),Object(j.a)(e)})),i&&c}d.f.error("Image must smaller than 2MB!")}else d.f.error("".concat(e.name," is not a Image file"))}};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(l.a,Object(s.a)(Object(s.a)({},C),{},{action:"".concat(b.d,"/api/fackupload"),listType:"picture-card",fileList:x,onPreview:v,onChange:function(e){var r=e.fileList,i=e.file;return i.size/1024/1024>2?0:"image/jpeg"===i.type||"image/png"===i.type?(a(t.filter((function(e){return r.some((function(t){return e.uid===t.uid}))}))),void _(Object(s.a)(Object(s.a)({},c),{},{fileList:r.filter((function(e){return e.type.includes("image")}))}))):0},children:x.length>=1?null:w})),Object(m.jsx)(o.a,{visible:g,title:y,footer:null,onCancel:function(){return _(Object(s.a)(Object(s.a)({},c),{},{previewVisible:!1}))},children:Object(m.jsx)("img",{alt:"example",style:{width:"100%"},src:O})})]})}}}]);
//# sourceMappingURL=38.3e88b7ea.chunk.js.map