(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[219],{2162:function(e,a,t){"use strict";t.r(a);var s=t(21),r=t(523),n=t.n(r),c=t(1),o=t(533),l=t(15),i=(t(477),t(608)),d=t(684),u=t(466),g=t(128),m=t(1062),j=(t(657),t(471)),b=t(56),p=t.n(b),h=t(0),O=(t(1420),t(546)),f=t(125),x=t(653),v=t(451),N=t(1064),y=t(118),k=t(465),C=t(467),S=t(460),w=t(484),M=t(475),P=t(1342),T=t(479),I=t(1369),B=t(446),A=t(476),z=t(86),H=t(455),E=t(6);a.default=function(){var e,a=Object(d.a)(),r=Object(l.a)(a,2),b=r[0],R=(r[1],Object(h.useContext)(g.a)),F=Object(f.b)(),L=(Object(x.g)(),Object(h.useState)("")),D=Object(l.a)(L,2),J=(D[0],D[1]),U=Object(h.useState)(""),V=Object(l.a)(U,2),_=(V[0],V[1]),q=Object(h.useState)(!1),W=Object(l.a)(q,2),Y=W[0],G=W[1],K=Object(h.useState)({}),Q=Object(l.a)(K,2),X=Q[0],Z=(Q[1],Object(O.c)()),$=Z.register,ee=Z.errors,ae=Z.handleSubmit,te="dark"===b?"login-v2-dark.svg":"login-v2.svg",se=t(784)("./".concat(te)).default;return Object(E.jsx)("div",{className:"auth-wrapper auth-v2",children:Object(E.jsxs)(k.a,{className:"auth-inner m-0",children:[Object(E.jsxs)(v.b,{className:"brand-logo",to:"/",onClick:function(e){return e.preventDefault()},children:[Object(E.jsx)("img",{width:"50px",src:z.default}),Object(E.jsx)("h2",{style:{color:window.TukitakiThemeColor},className:"brand-text ml-1 mt-1",children:"E-VMS Admin"})]}),Object(E.jsx)(C.a,{className:"d-none d-lg-flex align-items-center p-5",lg:"8",sm:"12",children:Object(E.jsx)("div",{className:"w-100 d-lg-flex align-items-center justify-content-center px-5",children:Object(E.jsx)("img",{className:"img-fluid",src:se,alt:"Login V2"})})}),Object(E.jsx)(C.a,{className:"d-flex align-items-center auth-bg px-2 p-lg-5",lg:"4",sm:"12",children:Object(E.jsxs)(C.a,{className:"px-xl-2 mx-auto",sm:"8",md:"6",lg:"12",children:[Object(E.jsx)(S.a,{tag:"h2",className:"font-weight-bold mb-1",children:"Welcome to EVMS admin"}),Object(E.jsx)(w.a,{className:"mb-2",children:"Please sign-in to your account and start the adventure"}),Object(E.jsxs)(M.a,{className:"auth-login-form mt-2",onSubmit:ae((function(e){var a=e.loginemail,t=e["login-password"];Object(j.e)(ee)&&(G(!0),u.a.login({username:a,password:t}).then(function(){var e=Object(o.a)(n.a.mark((function e(t){var s,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.getPMStoken({username:"dddd",module:"kkk"}).then((function(e){localStorage.setItem("PMStoken",e.data.data.access_token)})).catch((function(e){console.log("getPMStoken",e)}));case 2:return localStorage.setItem("BMSCall",!0),e.next=5,u.a.getBMStoken({username:N.d,password:N.c}).then((function(e){localStorage.setItem("BMStoken",e.data.jwtToken),localStorage.setItem("useBMStoken",!1),localStorage.setItem("BMSCall",!1)})).catch((function(e){localStorage.setItem("BMSCall",!1),console.log(e)}));case 5:12===(s=parseInt(t.data.payload.user_info.roleid))||13===s?(r=Object(c.a)(Object(c.a)({},t.data.payload.user_info),{},{fullname:"",avatar:"https://i.imgur.com/P4b2RHh.png",accessToken:t.data.payload.token,refreshToken:t.data.payload.token,extras:{eCommerceCartItemsCount:5},role:"admin"}),12===s?(r.role="admin",r.ability=[{action:"manage",subject:"ADMIN"},{action:"manage",subject:"Auth"}]):(r.role="cashier",r.ability=[{action:"manage",subject:"CASHIER"},{action:"manage",subject:"Auth"}]),F(Object(m.a)(r)),R.update(r.ability),localStorage.setItem("username",a),u.a.AdminUsersAssignedMenus().then((function(e){console.log("AdminUsersAssignedMenus",e.data.payload);var a=e.data.payload;localStorage.setItem("AssignedMenus",JSON.stringify(a)),window.location.href=Object(j.c)(r.role)})).catch((function(e){console.log(e.response)}))):y.f.error("You don't have permission to login");case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){G(!1),Object(H.a)(e),console.log(e.response)})))})),children:[Object(E.jsxs)(P.a,{children:[Object(E.jsx)(T.a,{className:"form-label",for:"login-email",children:"User Name"}),Object(E.jsx)(I.a,{autoFocus:!0,type:"text",id:"login-email",name:"loginemail",placeholder:"username",onChange:function(e){return J(e.target.value)},className:p()({"is-invalid":ee["login-email"]}),innerRef:$({required:!0,validate:function(e){return""!==e}})})]}),Object(E.jsxs)(P.a,{children:[Object(E.jsx)("div",{className:"d-flex justify-content-between",children:Object(E.jsx)(T.a,{className:"form-label",for:"login-password",children:"Password"})}),Object(E.jsx)(i.a,(e={id:"login-password",name:"login-password",className:"input-group-merge",onChange:function(e){return _(e.target.value)}},Object(s.a)(e,"className",p()({"is-invalid":ee["login-password"]})),Object(s.a)(e,"innerRef",$({required:!0,validate:function(e){return""!==e&&e.length>5}})),e)),Object(E.jsx)("span",{style:{color:"red"},children:ee["login-password"]&&"Password must contain at least 6 characters, including 1 upper case,1 lower case, 1 number and a spatial character"}),Object(E.jsx)("span",{style:{color:"red"},children:X.password})]}),Y?Object(E.jsxs)(B.a.Ripple,{color:"primary",block:!0,disabled:!0,children:[Object(E.jsx)(A.a,{color:"white",size:"sm"}),Object(E.jsx)("span",{className:"ml-50",children:"Loading..."})]}):Object(E.jsx)(B.a.Ripple,{type:"submit",color:"primary",block:!0,children:"Sign in"}),Object(E.jsx)("br",{}),Object(E.jsxs)("p",{className:"text-center",children:["Don't have an account \xa0",Object(E.jsx)(v.b,{to:"/merchantregister",children:"Register"})]}),Object(E.jsx)("div",{className:"divider my-2",children:Object(E.jsx)("div",{className:"divider-text",children:"or"})}),Object(E.jsxs)("p",{className:"text-center",children:["Login as \xa0",Object(E.jsx)(v.b,{to:"/login",children:"Merchant"})]})]})]})})]})})}},455:function(e,a,t){"use strict";t.d(a,"a",(function(){return r})),t.d(a,"b",(function(){return n})),t.d(a,"c",(function(){return c}));t(0);var s=t(118),r=function(e){try{var a=e.response;404===a.status||401===a.status||400===a.status||500===a.status?s.f.error(a.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):s.f.error("The server is under maintenance",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(a){s.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},n=function(e){try{var a=e.response;404!==a.status&&401!==a.status&&400!==a.status||s.f.error(a.data.errors?a.data.errors[Object.keys(a.data.errors)[0]]:a.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(a){s.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},c=function(e){var a=e.data.message||"success";s.f.success(a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},460:function(e,a,t){"use strict";var s=t(14),r=t(20),n=t(0),c=t.n(n),o=t(5),l=t.n(o),i=t(56),d=t.n(i),u=t(78),g={tag:u.tagPropType,className:l.a.string,cssModule:l.a.object},m=function(e){var a=e.className,t=e.cssModule,n=e.tag,o=Object(r.a)(e,["className","cssModule","tag"]),l=Object(u.mapToCssModules)(d()(a,"card-title"),t);return c.a.createElement(n,Object(s.a)({},o,{className:l}))};m.propTypes=g,m.defaultProps={tag:"div"},a.a=m},476:function(e,a,t){"use strict";var s=t(14),r=t(20),n=t(0),c=t.n(n),o=t(5),l=t.n(o),i=t(56),d=t.n(i),u=t(78),g={tag:u.tagPropType,type:l.a.string,size:l.a.string,color:l.a.string,className:l.a.string,cssModule:l.a.object,children:l.a.string},m=function(e){var a=e.className,t=e.cssModule,n=e.type,o=e.size,l=e.color,i=e.children,g=e.tag,m=Object(r.a)(e,["className","cssModule","type","size","color","children","tag"]),j=Object(u.mapToCssModules)(d()(a,!!o&&"spinner-"+n+"-"+o,"spinner-"+n,!!l&&"text-"+l),t);return c.a.createElement(g,Object(s.a)({role:"status"},m,{className:j}),i&&c.a.createElement("span",{className:Object(u.mapToCssModules)("sr-only",t)},i))};m.propTypes=g,m.defaultProps={tag:"div",type:"border",children:"Loading..."},a.a=m},484:function(e,a,t){"use strict";var s=t(14),r=t(20),n=t(0),c=t.n(n),o=t(5),l=t.n(o),i=t(56),d=t.n(i),u=t(78),g={tag:u.tagPropType,className:l.a.string,cssModule:l.a.object},m=function(e){var a=e.className,t=e.cssModule,n=e.tag,o=Object(r.a)(e,["className","cssModule","tag"]),l=Object(u.mapToCssModules)(d()(a,"card-text"),t);return c.a.createElement(n,Object(s.a)({},o,{className:l}))};m.propTypes=g,m.defaultProps={tag:"p"},a.a=m},608:function(e,a,t){"use strict";var s=t(1),r=t(21),n=t(15),c=t(124),o=t(0),l=t(56),i=t.n(l),d=t(1436),u=t(1435),g=t(479),m=t(1367),j=t(1369),b=t(1368),p=t(1104),h=t(6),O=["label","hideIcon","showIcon","visible","className","htmlFor","placeholder","iconSize","inputClassName"],f=function(e){var a=e.label,t=e.hideIcon,l=e.showIcon,f=e.visible,x=e.className,v=e.htmlFor,N=e.placeholder,y=e.iconSize,k=e.inputClassName,C=Object(c.a)(e,O),S=Object(o.useState)(f),w=Object(n.a)(S,2),M=w[0],P=w[1];return Object(h.jsxs)(o.Fragment,{children:[a?Object(h.jsx)(g.a,{for:v,children:a}):null,Object(h.jsxs)(m.a,{className:i()(Object(r.a)({},x,x)),children:[Object(h.jsx)(j.a,Object(s.a)(Object(s.a)({type:!1===M?"password":"text",placeholder:N||"\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7",className:i()(Object(r.a)({},k,k))},a&&v?{id:v}:{}),C)),Object(h.jsx)(b.a,{addonType:"append",onClick:function(){return P(!M)},children:Object(h.jsx)(p.a,{className:"cursor-pointer",children:function(){var e=y||14;return!1===M?t||Object(h.jsx)(d.a,{size:e}):l||Object(h.jsx)(u.a,{size:e})}()})})]})]})};a.a=f,f.defaultProps={visible:!1}}}]);
//# sourceMappingURL=219.b0c8dc84.chunk.js.map