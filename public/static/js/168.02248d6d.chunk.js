(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[168],{2123:function(e,a,s){"use strict";s.r(a);var t=s(21),r=s(1),n=s(15),o=s(0),c=s(651),i=s(451),l=s(478),u=s(487),m=s.n(u),d=s(493),p=s.n(d),b=s(1434),j=s(1504),g=s(1406),f=s(1370),O=s(1405),h=s(471),x=s(465),y=s(467),v=s(446),N=s(472),C=s(469),T=s(461),M=s(460),k=s(475),P=s(1341),w=s(479),S=s(1368),z=s(477),E=s(466),R=s(481),B=s.n(R),L=s(482),A=s.n(L),U=s(456),D=s(6),H=A()(B.a);a.default=function(){var e=Object(c.g)(),a=Object(o.useRef)(),s=Object(c.i)().businessId,u=sessionStorage.getItem("customer_idx"),d=Object(o.useState)(!1),R=Object(n.a)(d,2),B=R[0],L=R[1],A=Object(o.useState)(!0),_=Object(n.a)(A,2),q=_[0],W=_[1],F=Object(o.useState)([]),I=Object(n.a)(F,2),G=I[0],J=I[1],Y=Object(o.useState)([]),K=Object(n.a)(Y,2),V=K[0],Q=K[1],X=Object(o.useState)(0),Z=Object(n.a)(X,2),$=Z[0],ee=Z[1],ae=Object(o.useState)({mobile:""}),se=Object(n.a)(ae,2),te=se[0],re=se[1],ne=Object(o.useState)(!1),oe=Object(n.a)(ne,2),ce=oe[0],ie=oe[1],le=Object(o.useState)({userType:!1,mobile:!1,email:!1}),ue=Object(n.a)(le,2),me=ue[0],de=ue[1],pe=Object(o.useState)(10),be=Object(n.a)(pe,2),je=be[0],ge=be[1];Object(o.useEffect)((function(){E.a.appUserList({business_id:s,customer_idx:u}).then((function(e){W(!1),Q(e.data.payload),console.log(e.data.payload)})).catch((function(e){console.log(e)})),E.a.appUserType().then((function(e){var a=e.data.payload.map((function(e){return{value:e.id,label:e.statusdesc}}));J(a)})).catch((function(e){console.log(e)}))}),[ce]);var fe=function(e){"mobile"===e.target.name&&"0"===e.target.value.toString().substr(0,1)&&ge(11),"mobile"===e.target.name&&"0"!==e.target.value.toString().substr(0,1)&&ge(10),re((function(a){return Object(r.a)(Object(r.a)({},a),{},Object(t.a)({},e.target.name,e.target.value))}));var a=/\S+@\S+\.\S+/.test(e.target.value);"email"===e.target.name&&a&&de(Object(r.a)(Object(r.a)({},me),{},{email:!1})),"mobile"===e.target.name&&e.target.value.length===je&&de(Object(r.a)(Object(r.a)({},me),{},{mobile:!1}))},Oe=[{name:"Mobile",selector:function(e){return"0".concat(e.mobileno)},minWidth:"100px"},{name:"First Name",selector:"firstname",minWidth:"100px"},{name:"Last Name",selector:"lastname",minWidth:"100px"},{name:"Email",selector:"email",minWidth:"100px"},{name:"Type",selector:"subusertype",minWidth:"100px",cell:function(e){return e.subusertypeinfo?e.subusertypeinfo.statusdesc:""}},{name:"Actions",allowOverflow:!0,cell:function(a){return Object(D.jsxs)("div",{className:"d-flex",children:[Object(D.jsx)(b.a,{size:15,color:"#2bc871",style:{cursor:"pointer"},onClick:function(s){return function(a,s){var t=V.filter((function(e){return e.mobileno===a}));sessionStorage.setItem("AppUserData",JSON.stringify(t)),e.push("/AppUserEdit/".concat(a))}(a.mobileno)}})," \xa0\xa0",Object(D.jsx)(j.a,{size:15,color:"red",style:{cursor:"pointer"},onClick:function(e){return s=a.mobileno,t=a.idx,H.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",allowOutsideClick:!1,allowEscapeKey:!1,showCancelButton:!0,confirmButtonText:"Yes, delete it!",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ml-1"},buttonsStyling:!1}).then((function(e){e.value&&E.a.appDeleteUser({mobile:s,customer_idx:t}).then((function(e){H.fire({icon:"success",title:"Deleted!",text:"The user has been deleted.",customClass:{confirmButton:"btn btn-success"}}),ie(!ce)})).catch((function(e){console.log(e.response)}))}));var s,t}})]})}}];return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)(x.a,{className:"mb-2",children:[Object(D.jsx)(y.a,{sm:"2",children:Object(D.jsx)("h4",{children:"App User Access"})}),Object(D.jsxs)(y.a,{sm:"10",children:[Object(D.jsxs)(v.a.Ripple,{className:"ml-2",color:"primary",tag:i.b,to:"/business",children:[Object(D.jsx)(g.a,{size:10}),Object(D.jsx)("span",{className:"align-middle ml-50",children:"Back to Business List"})]}),Object(D.jsxs)(v.a.Ripple,{className:"ml-2",color:"primary",tag:i.b,to:"/editbusiness/".concat(s),children:[Object(D.jsx)(b.a,{size:14}),Object(D.jsx)("span",{className:"align-middle ml-50",children:"Edit this Business "})]})]})]}),Object(D.jsxs)(N.a,{children:[Object(D.jsx)(C.a,{className:"border-bottom",children:Object(D.jsx)(T.a,{tag:"h4",children:"App users for "})}),Object(D.jsxs)(M.a,{style:{paddingTop:"15px"},children:[Object(D.jsxs)(k.a,{className:"row",style:{width:"100%"},onSubmit:function(e){L(!0),e.preventDefault();var t=te.mobile,n=te.email,o=te.firstname,c=te.lastname,i=te.subusertype,l=/\S+@\S+\.\S+/.test(n),m=Object(r.a)({},me);te.subusertype?m.userType=!1:m.userType=!0,m.email=!l,t.length!==je?m.mobile=!0:m.mobile=!1,de(m),l?m.userType||t.length!==je?L(!1):E.a.appAddNewUser({mobile:t,email:n,firstname:o,lastname:c,subusertype:i,customer_idx:u,business_id:s}).then((function(e){re({}),a.current.select.clearValue(),H.fire({icon:"success",title:"Done!",text:e.data.message,customClass:{confirmButton:"btn btn-success"}}),L(!1),ie(!ce)})).catch((function(e){L(!1),console.log(e),Object(U.a)(e)})):L(!1)},autoComplete:"off",children:[Object(D.jsx)(y.a,{sm:"4",children:Object(D.jsxs)(P.a,{children:[Object(D.jsxs)(w.a,{for:"mobile",children:["Mobile ",Object(D.jsx)("span",{style:{color:"red"},children:"*"})]}),"\xa0",me.mobile&&Object(D.jsxs)("span",{style:{color:"red",fontSize:"11px"},children:["must be ",je," digit"]}),Object(D.jsx)(S.a,{type:"number",name:"mobile",id:"mobile",onChange:fe,required:!0,value:te.mobile?te.mobile:"",placeholder:"079076661234"})]})}),Object(D.jsx)(y.a,{sm:"4",children:Object(D.jsxs)(P.a,{children:[Object(D.jsxs)(w.a,{for:"firstName",children:["Firstname ",Object(D.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(D.jsx)(S.a,{type:"text",name:"firstname",id:"firstName",onChange:fe,required:!0,value:te.firstname?te.firstname:"",placeholder:"firstname"})]})}),Object(D.jsx)(y.a,{sm:"4",children:Object(D.jsxs)(P.a,{children:[Object(D.jsxs)(w.a,{for:"lastName",children:["Lastname ",Object(D.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(D.jsx)(S.a,{type:"text",name:"lastname",id:"lastName",onChange:fe,required:!0,value:te.lastname?te.lastname:"",placeholder:"lastname"})]})}),Object(D.jsx)(y.a,{sm:"4",children:Object(D.jsxs)(P.a,{children:[Object(D.jsxs)(w.a,{for:"email",children:["Email ",Object(D.jsx)("span",{style:{color:"red"},children:"*"})]}),"\xa0",me.email&&Object(D.jsx)("span",{style:{color:"red",fontSize:"11px"},children:"is not valid"}),Object(D.jsx)(S.a,{type:"email",name:"email",id:"email",onChange:fe,required:!0,value:te.email?te.email:"",placeholder:"example@gmail.com"})]})}),Object(D.jsx)(y.a,{sm:"4",children:Object(D.jsxs)(P.a,{children:[Object(D.jsxs)(w.a,{for:"AppUserType",children:["Type ",Object(D.jsx)("span",{style:{color:"red"},children:"*"})]}),"\xa0",me.userType&&Object(D.jsx)("span",{style:{color:"red",fontSize:"11px"},children:"Required"}),Object(D.jsx)(l.a,{theme:h.h,ref:a,className:"react-select",classNamePrefix:"select",name:"AppUserType",onChange:function(e,a){"clear"===a.action?re(Object(r.a)(Object(r.a)({},te),{},{subusertype:null})):(de(Object(r.a)(Object(r.a)({},me),{},{userType:!1})),re(Object(r.a)(Object(r.a)({},te),{},{subusertype:e.value})))},options:G,isClearable:!0})]})}),Object(D.jsx)(y.a,{sm:"4",children:B?Object(D.jsxs)(v.a.Ripple,{color:"primary",className:"mr-1",disabled:!0,style:{marginTop:"25px"},children:[Object(D.jsx)(z.a,{color:"white",size:"sm"}),Object(D.jsx)("span",{className:"ml-50",children:"Loading..."})]}):Object(D.jsxs)(v.a.Ripple,{className:"ml-2",color:"primary",type:"submit",style:{marginTop:"25px"},children:[Object(D.jsx)(f.a,{size:15}),Object(D.jsx)("span",{className:"align-middle ml-50",children:"Add "})]})})]}),Object(D.jsx)(x.a,{className:"mt-2",children:Object(D.jsx)(y.a,{sm:"12",children:Object(D.jsx)(p.a,{noHeader:!0,pagination:!0,columns:Oe,paginationPerPage:10,className:"react-dataTable",sortIcon:Object(D.jsx)(O.a,{size:10}),paginationDefaultPage:$+1,paginationComponent:function(){var e;return Object(D.jsx)(m.a,(e={previousLabel:"",nextLabel:"",forcePage:$,onPageChange:function(e){return function(e){ee(e.selected)}(e)},pageCount:V.length?V.length/10:1,breakLabel:"...",pageRangeDisplayed:2,marginPagesDisplayed:2,activeClassName:"active",pageClassName:"page-item",breakClassName:"page-item",breakLinkClassName:"page-link",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link"},Object(t.a)(e,"breakClassName","page-item"),Object(t.a)(e,"breakLinkClassName","page-link"),Object(t.a)(e,"containerClassName","pagination react-paginate separated-pagination pagination-sm justify-content-end pr-1 mt-1"),e))},data:V,progressPending:q,progressComponent:Object(D.jsx)(z.a,{color:"primary"}),responsive:!0})})})]})]})]})}},456:function(e,a,s){"use strict";s.d(a,"a",(function(){return r})),s.d(a,"b",(function(){return n})),s.d(a,"c",(function(){return o}));s(0);var t=s(121),r=function(e){try{var a=e.response;404===a.status||401===a.status||400===a.status||500===a.status?t.f.error(a.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):t.f.error("The server is under maintenance",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(a){t.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},n=function(e){try{var a=e.response;404!==a.status&&401!==a.status&&400!==a.status||t.f.error(a.data.errors?a.data.errors[Object.keys(a.data.errors)[0]]:a.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(a){t.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},o=function(e){var a=e.data.message||"success";t.f.success(a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},460:function(e,a,s){"use strict";var t=s(14),r=s(20),n=s(0),o=s.n(n),c=s(5),i=s.n(c),l=s(56),u=s.n(l),m=s(78),d={tag:m.tagPropType,className:i.a.string,cssModule:i.a.object,innerRef:i.a.oneOfType([i.a.object,i.a.string,i.a.func])},p=function(e){var a=e.className,s=e.cssModule,n=e.innerRef,c=e.tag,i=Object(r.a)(e,["className","cssModule","innerRef","tag"]),l=Object(m.mapToCssModules)(u()(a,"card-body"),s);return o.a.createElement(c,Object(t.a)({},i,{className:l,ref:n}))};p.propTypes=d,p.defaultProps={tag:"div"},a.a=p},461:function(e,a,s){"use strict";var t=s(14),r=s(20),n=s(0),o=s.n(n),c=s(5),i=s.n(c),l=s(56),u=s.n(l),m=s(78),d={tag:m.tagPropType,className:i.a.string,cssModule:i.a.object},p=function(e){var a=e.className,s=e.cssModule,n=e.tag,c=Object(r.a)(e,["className","cssModule","tag"]),i=Object(m.mapToCssModules)(u()(a,"card-title"),s);return o.a.createElement(n,Object(t.a)({},c,{className:i}))};p.propTypes=d,p.defaultProps={tag:"div"},a.a=p},465:function(e,a,s){"use strict";var t=s(14),r=s(20),n=s(0),o=s.n(n),c=s(5),i=s.n(c),l=s(56),u=s.n(l),m=s(78),d=i.a.oneOfType([i.a.number,i.a.string]),p={tag:m.tagPropType,noGutters:i.a.bool,className:i.a.string,cssModule:i.a.object,form:i.a.bool,xs:d,sm:d,md:d,lg:d,xl:d},b={tag:"div",widths:["xs","sm","md","lg","xl"]},j=function(e){var a=e.className,s=e.cssModule,n=e.noGutters,c=e.tag,i=e.form,l=e.widths,d=Object(r.a)(e,["className","cssModule","noGutters","tag","form","widths"]),p=[];l.forEach((function(a,s){var t=e[a];if(delete d[a],t){var r=!s;p.push(r?"row-cols-"+t:"row-cols-"+a+"-"+t)}}));var b=Object(m.mapToCssModules)(u()(a,n?"no-gutters":null,i?"form-row":"row",p),s);return o.a.createElement(c,Object(t.a)({},d,{className:b}))};j.propTypes=p,j.defaultProps=b,a.a=j},467:function(e,a,s){"use strict";var t=s(14),r=s(20),n=s(0),o=s.n(n),c=s(5),i=s.n(c),l=s(56),u=s.n(l),m=s(78),d=i.a.oneOfType([i.a.number,i.a.string]),p=i.a.oneOfType([i.a.bool,i.a.number,i.a.string,i.a.shape({size:i.a.oneOfType([i.a.bool,i.a.number,i.a.string]),order:d,offset:d})]),b={tag:m.tagPropType,xs:p,sm:p,md:p,lg:p,xl:p,className:i.a.string,cssModule:i.a.object,widths:i.a.array},j={tag:"div",widths:["xs","sm","md","lg","xl"]},g=function(e,a,s){return!0===s||""===s?e?"col":"col-"+a:"auto"===s?e?"col-auto":"col-"+a+"-auto":e?"col-"+s:"col-"+a+"-"+s},f=function(e){var a=e.className,s=e.cssModule,n=e.widths,c=e.tag,i=Object(r.a)(e,["className","cssModule","widths","tag"]),l=[];n.forEach((function(a,t){var r=e[a];if(delete i[a],r||""===r){var n=!t;if(Object(m.isObject)(r)){var o,c=n?"-":"-"+a+"-",d=g(n,a,r.size);l.push(Object(m.mapToCssModules)(u()(((o={})[d]=r.size||""===r.size,o["order"+c+r.order]=r.order||0===r.order,o["offset"+c+r.offset]=r.offset||0===r.offset,o)),s))}else{var p=g(n,a,r);l.push(p)}}})),l.length||l.push("col");var d=Object(m.mapToCssModules)(u()(a,l),s);return o.a.createElement(c,Object(t.a)({},i,{className:d}))};f.propTypes=b,f.defaultProps=j,a.a=f},469:function(e,a,s){"use strict";var t=s(14),r=s(20),n=s(0),o=s.n(n),c=s(5),i=s.n(c),l=s(56),u=s.n(l),m=s(78),d={tag:m.tagPropType,className:i.a.string,cssModule:i.a.object},p=function(e){var a=e.className,s=e.cssModule,n=e.tag,c=Object(r.a)(e,["className","cssModule","tag"]),i=Object(m.mapToCssModules)(u()(a,"card-header"),s);return o.a.createElement(n,Object(t.a)({},c,{className:i}))};p.propTypes=d,p.defaultProps={tag:"div"},a.a=p},475:function(e,a,s){"use strict";var t=s(14),r=s(20),n=s(117),o=s(116),c=s(0),i=s.n(c),l=s(5),u=s.n(l),m=s(56),d=s.n(m),p=s(78),b={children:u.a.node,inline:u.a.bool,tag:p.tagPropType,innerRef:u.a.oneOfType([u.a.object,u.a.func,u.a.string]),className:u.a.string,cssModule:u.a.object},j=function(e){function a(a){var s;return(s=e.call(this,a)||this).getRef=s.getRef.bind(Object(n.a)(s)),s.submit=s.submit.bind(Object(n.a)(s)),s}Object(o.a)(a,e);var s=a.prototype;return s.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},s.submit=function(){this.ref&&this.ref.submit()},s.render=function(){var e=this.props,a=e.className,s=e.cssModule,n=e.inline,o=e.tag,c=e.innerRef,l=Object(r.a)(e,["className","cssModule","inline","tag","innerRef"]),u=Object(p.mapToCssModules)(d()(a,!!n&&"form-inline"),s);return i.a.createElement(o,Object(t.a)({},l,{ref:c,className:u}))},a}(c.Component);j.propTypes=b,j.defaultProps={tag:"form"},a.a=j},477:function(e,a,s){"use strict";var t=s(14),r=s(20),n=s(0),o=s.n(n),c=s(5),i=s.n(c),l=s(56),u=s.n(l),m=s(78),d={tag:m.tagPropType,type:i.a.string,size:i.a.string,color:i.a.string,className:i.a.string,cssModule:i.a.object,children:i.a.string},p=function(e){var a=e.className,s=e.cssModule,n=e.type,c=e.size,i=e.color,l=e.children,d=e.tag,p=Object(r.a)(e,["className","cssModule","type","size","color","children","tag"]),b=Object(m.mapToCssModules)(u()(a,!!c&&"spinner-"+n+"-"+c,"spinner-"+n,!!i&&"text-"+i),s);return o.a.createElement(d,Object(t.a)({role:"status"},p,{className:b}),l&&o.a.createElement("span",{className:Object(m.mapToCssModules)("sr-only",s)},l))};p.propTypes=d,p.defaultProps={tag:"div",type:"border",children:"Loading..."},a.a=p},479:function(e,a,s){"use strict";var t=s(14),r=s(20),n=s(0),o=s.n(n),c=s(5),i=s.n(c),l=s(56),u=s.n(l),m=s(78),d=i.a.oneOfType([i.a.number,i.a.string]),p=i.a.oneOfType([i.a.bool,i.a.string,i.a.number,i.a.shape({size:d,order:d,offset:d})]),b={children:i.a.node,hidden:i.a.bool,check:i.a.bool,size:i.a.string,for:i.a.string,tag:m.tagPropType,className:i.a.string,cssModule:i.a.object,xs:p,sm:p,md:p,lg:p,xl:p,widths:i.a.array},j={tag:"label",widths:["xs","sm","md","lg","xl"]},g=function(e,a,s){return!0===s||""===s?e?"col":"col-"+a:"auto"===s?e?"col-auto":"col-"+a+"-auto":e?"col-"+s:"col-"+a+"-"+s},f=function(e){var a=e.className,s=e.cssModule,n=e.hidden,c=e.widths,i=e.tag,l=e.check,d=e.size,p=e.for,b=Object(r.a)(e,["className","cssModule","hidden","widths","tag","check","size","for"]),j=[];c.forEach((function(a,t){var r=e[a];if(delete b[a],r||""===r){var n,o=!t;if(Object(m.isObject)(r)){var c,i=o?"-":"-"+a+"-";n=g(o,a,r.size),j.push(Object(m.mapToCssModules)(u()(((c={})[n]=r.size||""===r.size,c["order"+i+r.order]=r.order||0===r.order,c["offset"+i+r.offset]=r.offset||0===r.offset,c))),s)}else n=g(o,a,r),j.push(n)}}));var f=Object(m.mapToCssModules)(u()(a,!!n&&"sr-only",!!l&&"form-check-label",!!d&&"col-form-label-"+d,j,!!j.length&&"col-form-label"),s);return o.a.createElement(i,Object(t.a)({htmlFor:p},b,{className:f}))};f.propTypes=b,f.defaultProps=j,a.a=f}}]);
//# sourceMappingURL=168.02248d6d.chunk.js.map