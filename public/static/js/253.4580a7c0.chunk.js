(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[253],{2277:function(e,t,a){"use strict";a.r(t);var n=a(21),s=a(15),r=a(121),o=a(0),c=a(1434),i=a(1504),l=a(1371),u=a(472),d=a(468),g=a(460),m=a(446),b=a(459),j=a(465),p=a(467),h=a(451),O=a(466),S=a(455),f=a(481),x=a.n(f),C=a(482),k=a.n(C),v=a(507),R=a(1),y=a(562),P=a(565),K=a(557),U=a(475),I=a(1342),N=a(479),w=a(1369),A=a(476),D=(a(471),a(6)),L=function(e){var t=e.modal,a=e.toggleModal,r=e.pointRuleInfo,c=e.setPointRuleInfo,i=e.setReset,l=e.resetData,u=(JSON.parse(localStorage.getItem("customerBusinesses")),Object(o.useState)(!1)),d=Object(s.a)(u,2),g=d[0],b=d[1],j=Object(o.useState)({email:!1}),h=Object(s.a)(j,2),f=(h[0],h[1],function(e){c(Object(R.a)(Object(R.a)({},r),{},Object(n.a)({},e.target.name,e.target.value)))});return Object(D.jsxs)(y.a,{isOpen:t,toggle:a,className:"modal-dialog-centered",children:[Object(D.jsx)(P.a,{toggle:a,children:"Edit Point Rule"}),Object(D.jsx)(K.a,{children:Object(D.jsxs)(U.a,{className:"row",style:{width:"100%"},onSubmit:function(e){e.preventDefault();var t=r.Id,n=r.SKUAmount,s=r.SKUPoints,o=r.SKUStartRange,c=r.SKUEndRange,u=r.IsRange;localStorage.setItem("usePMStoken",!0),b(!0);var d=r.merchantid,g=0;u||(g=n),O.a.updateMyRule(d,{rule_id:t,skuamount:g,skupoints:s,skustartrange:o,skuendrange:c,isrange:u}).then((function(e){i(!l),b(!1),console.log(e),a(),Object(S.c)(e)})).catch((function(e){b(!1),localStorage.setItem("usePMStoken",!1),Object(S.a)(e),console.log(e)}))},autoComplete:"off",children:[Object(D.jsx)(p.a,{sm:"6",children:Object(D.jsxs)(I.a,{children:[Object(D.jsx)(N.a,{for:"SKUPoints",children:"SKU Points"}),Object(D.jsx)(w.a,{type:"number",name:"SKUPoints",id:"SKUPoints",value:r.SKUPoints,onChange:f,required:!0,placeholder:"0"})]})}),Object(D.jsx)(p.a,{sm:"12",className:"mb-1",children:Object(D.jsxs)(I.a,{check:!0,children:[Object(D.jsx)(w.a,{onChange:function(e){e.target.checked?c(Object(R.a)(Object(R.a)({},r),{},{IsRange:!0})):c(Object(R.a)(Object(R.a)({},r),{},{IsRange:!1}))},type:"checkbox",id:"viaEmail",checked:r.IsRange}),Object(D.jsx)(N.a,{for:"viaEmail",check:!0,children:"Is Range"})]})}),r.IsRange?Object(D.jsx)(p.a,{sm:"6",children:Object(D.jsxs)(I.a,{children:[Object(D.jsx)(N.a,{for:"SKUStartRange",children:"SKU Start Range"}),Object(D.jsx)(w.a,{type:"number",name:"SKUStartRange",id:"SKUStartRange",value:r.SKUStartRange,onChange:f,required:!0,placeholder:"0"})]})}):null,r.IsRange?Object(D.jsx)(p.a,{sm:"6",children:Object(D.jsxs)(I.a,{children:[Object(D.jsx)(N.a,{for:"SKUEndRange",children:"SKU End Range"}),Object(D.jsx)(w.a,{type:"number",name:"SKUEndRange",id:"SKUEndRange",value:r.SKUEndRange,onChange:f,required:!0,placeholder:"0"})]})}):null,r.IsRange?null:Object(D.jsx)(p.a,{sm:"6",children:Object(D.jsxs)(I.a,{children:[Object(D.jsx)(N.a,{for:"SKUAmount",children:"SKU Amount"}),Object(D.jsx)(w.a,{type:"number",name:"SKUAmount",id:"SKUAmount",value:r.SKUAmount,onChange:f,required:!0,placeholder:"0"})]})}),Object(D.jsx)(p.a,{sm:"12",className:"text-center",children:g?Object(D.jsxs)(m.a.Ripple,{color:"primary",className:"mr-1",disabled:!0,style:{marginTop:"25px"},children:[Object(D.jsx)(A.a,{color:"white",size:"sm"}),Object(D.jsx)("span",{className:"ml-50",children:"Loading..."})]}):Object(D.jsx)(m.a.Ripple,{className:"ml-2",color:"primary",type:"submit",style:{marginTop:"25px"},children:Object(D.jsx)("span",{children:"Submit"})})})]})})]})},M=a(567),B=k()(x.a);t.default=function(){var e,t=(JSON.parse(localStorage.getItem("AssignedMenus"))||[]).map((function(e){return e.submenu.map((function(e){return e.id}))})),a=(e=[]).concat.apply(e,Object(r.a)(t)),f=Object(o.useState)(!0),C=Object(s.a)(f,2),k=C[0],R=C[1],y=Object(o.useState)(!0),P=Object(s.a)(y,2),K=P[0],U=P[1],I=Object(o.useState)([]),N=Object(s.a)(I,2),w=N[0],A=N[1],E=Object(o.useState)({}),W=Object(s.a)(E,2),T=W[0],H=W[1],z=Object(o.useState)(!1),q=Object(s.a)(z,2),F=q[0],J=q[1];Object(o.useEffect)((function(){localStorage.setItem("usePMStoken",!0),O.a.getAllPointRules().then((function(e){console.log(e),A(e.data.data),localStorage.setItem("usePMStoken",!1),R(!1)})).catch((function(e){Object(S.a)(e),console.log(e),R(!1),localStorage.setItem("usePMStoken",!1)}))}),[K]);var $=[{name:"SL",minWidth:"20px",sortable:!0,cell:function(e,t){return t+1}},{name:"Merchant Name",minWidth:"100px",sortable:!0,selector:"MerchantName"},{name:"SKU Points",minWidth:"100px",sortable:!0,selector:"SKUPoints"},{name:"Is Range",minWidth:"100px",sortable:!0,selector:function(e){return e.IsRange?"True":"False"}},{name:"SKU Amount",minWidth:"100px",sortable:!0,selector:"SKUAmount"},{name:"SKU Start Range",minWidth:"100px",sortable:!0,selector:"SKUStartRange"},{name:"SKU End Range",minWidth:"100px",sortable:!0,selector:"SKUEndRange"},{name:"Product ID",minWidth:"100px",sortable:!0,selector:"product_id"},{name:"Created At",minWidth:"250px",sortable:!0,selector:function(e){return e.CreatedAt?Object(M.b)(e.CreatedAt):null}},{name:"Created By",minWidth:"100px",sortable:!0,selector:"CreatedBy"},{name:"Action",minWidth:"100px",selector:function(e){return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("span",{title:"Edit",children:Object(D.jsx)(c.a,{size:15,color:"teal",style:{cursor:"pointer"},onClick:function(t){H(e),J(!0)}})}),"\xa0\xa0",Object(D.jsx)("span",{title:"Delete",children:Object(D.jsx)(i.a,{size:15,color:"red",style:{cursor:"pointer"},onClick:function(t){return a=e.Id,s=e.merchantid,r="Do you want to delete?",localStorage.setItem("usePMStoken",!0),B.fire(Object(n.a)({title:r,text:"You won't be able to revert this",icon:"warning",allowOutsideClick:!1,allowEscapeKey:!1,showCancelButton:!0,confirmButtonText:"Yes",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-danger ml-1"},showLoaderOnConfirm:!0,preConfirm:function(){return O.a.deleteMyRule(s,{rule_id:a}).then((function(e){Object(S.c)(e),console.log(e),A(w.filter((function(e){return e.Id!==a}))),localStorage.setItem("usePMStoken",!1)})).catch((function(e){localStorage.setItem("usePMStoken",!1),console.log(e.response),Object(S.a)(e)}))},buttonsStyling:!1},"allowOutsideClick",(function(){return!x.a.isLoading()}))).then((function(e){e.isConfirmed}));var a,s,r}})})]})}}];return Object(D.jsxs)(u.a,{children:[Object(D.jsxs)(d.a,{className:"border-bottom",children:[Object(D.jsx)(g.a,{tag:"h4",children:"SKU Rules"}),a.includes(16)&&Object(D.jsx)(m.a.Ripple,{className:"ml-2",color:"primary",tag:h.b,to:"/createPointRuleForAdmin",children:Object(D.jsxs)("div",{className:"d-flex align-items-center",children:[Object(D.jsx)(l.a,{size:17,style:{marginRight:"5px"}}),Object(D.jsx)("span",{children:"Create SKU Rule"})]})})]}),Object(D.jsxs)(b.a,{children:[Object(D.jsx)(j.a,{children:Object(D.jsx)(p.a,{md:"12",children:Object(D.jsx)(v.a,{column:$,TableData:w,TableDataLoading:k})})}),Object(D.jsx)(L,{toggleModal:function(){return J(!F)},modal:F,resetData:K,setReset:U,pointRuleInfo:T,setPointRuleInfo:H})]})]})}},455:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return o}));a(0);var n=a(118),s=function(e){try{var t=e.response;404===t.status||401===t.status||400===t.status||500===t.status?n.f.error(t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):n.f.error("The server is under maintenance",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){n.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},r=function(e){try{var t=e.response;404!==t.status&&401!==t.status&&400!==t.status||n.f.error(t.data.errors?t.data.errors[Object.keys(t.data.errors)[0]]:t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){n.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},o=function(e){var t=e.data.message||"success";n.f.success(t,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},507:function(e,t,a){"use strict";var n=a(21),s=a(15),r=a(0),o=a(1405),c=a(476),i=a(485),l=a.n(i),u=a(492),d=a.n(u),g=a(6);t.a=function(e){var t=e.column,a=e.TableData,i=e.TableDataLoading,u=Object(r.useState)(0),m=Object(s.a)(u,2),b=m[0],j=m[1];return Object(g.jsx)(r.Fragment,{children:Object(g.jsx)(d.a,{customStyles:{cells:{style:{whiteSpace:"break-spaces"}}},noHeader:!0,pagination:!0,columns:t,paginationPerPage:10,className:"react-dataTable",sortIcon:Object(g.jsx)(o.a,{size:10}),paginationDefaultPage:b+1,paginationComponent:function(){var e;return Object(g.jsx)(l.a,(e={previousLabel:"",nextLabel:"",forcePage:b,onPageChange:function(e){return function(e){j(e.selected)}(e)},pageCount:a.length?a.length/10:1,breakLabel:"...",pageRangeDisplayed:2,marginPagesDisplayed:2,activeClassName:"active",pageClassName:"page-item",breakClassName:"page-item",breakLinkClassName:"page-link",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link"},Object(n.a)(e,"breakClassName","page-item"),Object(n.a)(e,"breakLinkClassName","page-link"),Object(n.a)(e,"containerClassName","pagination react-paginate separated-pagination pagination-sm justify-content-end pr-1 mt-1"),e))},data:a,progressPending:i,progressComponent:Object(g.jsx)(c.a,{color:"primary"}),responsive:!0})})}},567:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return o}));var n=function(e){return String(e).replace(/^(.{4})(.*)(.{3})$/,"$1 $2 $3")},s={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"},r=function(e){return new Date(e).toLocaleDateString(void 0,s)},o=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}}}]);
//# sourceMappingURL=253.4580a7c0.chunk.js.map