(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[183],{2128:function(e,t,a){"use strict";a.r(t);var s=a(21),n=a(1),o=a(15),r=a(0),c=a(651),i=a(487),l=a.n(i),u=a(493),d=a.n(u),p=a(1406),m=a(1381),b=a(1404),g=a(1340),j=a(1405),f=(a(471),a(446)),h=a(472),O=a(475),x=a(1368),y=a(469),v=a(461),C=a(465),N=a(467),w=a(1341),T=a(479),k=a(477),M=(a(606),a(466)),S=a(481),P=a.n(S),R=a(482),_=a.n(R),z=a(567),B=a(456),E=a(6);_()(P.a);t.default=function(){var e=Object(c.i)().customerID,t=Object(c.g)(),a=Object(r.useState)({iou_limit:0,iou_used:0}),i=Object(o.a)(a,2),u=i[0],S=i[1],P=Object(r.useState)(""),R=Object(o.a)(P,2),_=R[0],L=R[1],U=Object(r.useState)(e),D=Object(o.a)(U,2),F=D[0],I=D[1],Y=Object(r.useState)(0),H=Object(o.a)(Y,2),W=H[0],$=H[1],G=Object(r.useState)(!0),q=Object(o.a)(G,2),A=q[0],J=q[1],K=Object(r.useState)([]),Q=Object(o.a)(K,2),V=Q[0],X=Q[1],Z=Object(r.useState)(0),ee=Object(o.a)(Z,2),te=ee[0],ae=ee[1],se=Object(r.useState)({}),ne=Object(o.a)(se,2),oe=ne[0],re=ne[1],ce=Object(r.useState)(!1),ie=Object(o.a)(ce,2),le=ie[0],ue=ie[1],de=Object(r.useState)(!1),pe=Object(o.a)(de,2),me=pe[0],be=pe[1],ge=Object(r.useState)(""),je=Object(o.a)(ge,2),fe=je[0],he=je[1],Oe=Object(r.useState)(!1),xe=Object(o.a)(Oe,2),ye=xe[0],ve=xe[1],Ce=Object(r.useState)(!0),Ne=Object(o.a)(Ce,2),we=Ne[0],Te=Ne[1],ke=function(t){J(!0),M.a.customerIOUsettingInfo({customerid:t}).then((function(t){console.log(t.data.payload),t.data.payload.businessinfo?S(t.data.payload.businessinfo):S({}),I(_||e),J(!1),Te(!1),ve(t.data.payload.directdebitset),X(t.data.payload.ioulogs)})).catch((function(e){console.log(e),Object(B.a)(e),ve(!1),S({}),X([]),I(t),Te(!1),J(!1)}))};Object(r.useEffect)((function(){ke(e)}),[me]);var Me=+(u.iou_limit?u.iou_limit-u.iou_used:u.iou_used?u.iou_used:0),Se=function(e){re(Object(n.a)(Object(n.a)({},oe),{},Object(s.a)({},e.target.name,e.target.value)))},Pe=[{name:"Time",selector:function(e){return Object(z.b)(e.created_at)},minWidth:"200px"},{name:"Store",selector:function(e){return e.storeinfo.storename||""},minWidth:"200px",sortable:!0},{name:"User",selector:"created_by",minWidth:"100px",sortable:!0},{name:"Type",selector:"type",minWidth:"130px",sortable:!0},{name:"Change(".concat(window.CURRENCY_SYMBOL,")"),selector:function(e){return"".concat(e.change_sign).concat(e.change.toFixed(2))},minWidth:"100px",sortable:!0},{name:"Balance(".concat(window.CURRENCY_SYMBOL,")"),selector:function(e){return e.balance.toFixed(2)},minWidth:"100px",sortable:!0}];return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(f.a.Ripple,{className:"mb-2 ml-2",color:"primary",onClick:function(){return t.goBack()},children:[Object(E.jsx)(p.a,{size:10}),Object(E.jsx)("span",{className:"align-middle ml-50",children:"Back to list"})]}),Object(E.jsx)(h.a,{children:Object(E.jsxs)(O.a,{className:"d-flex my-2 mx-1 justify-content-center",style:{width:"100%"},onSubmit:function(e){e.preventDefault(),""!==_&&ke(_)},autoComplete:"off",children:[Object(E.jsx)(x.a,{style:{width:"50%"},placeholder:"Search a Customer by ID",type:"number",id:"search-input",value:_,onChange:function(e){L(e.target.value)}}),Object(E.jsxs)(f.a.Ripple,{className:"ml-2",color:"primary",type:"submit",children:[Object(E.jsx)(m.a,{size:15}),Object(E.jsx)("span",{className:"align-middle ml-50",children:"Search"})]})]})}),Object(E.jsxs)(h.a,{children:[Object(E.jsx)(y.a,{className:"border-bottom",children:Object(E.jsx)(v.a,{tag:"h4",children:"Customer IOU Setting"})}),Object(E.jsxs)(C.a,{children:[Object(E.jsxs)(N.a,{md:"5",children:[Object(E.jsxs)(O.a,{className:"d-flex mb-2 mx-1 justify-content-center",style:{width:"100%"},onSubmit:function(e){if(e.preventDefault(),he(""),console.log({change:te,typeid:1,busnessid:u.id}),"undefined"===typeof u.id||"e"===te)return 0;if(0===parseFloat(te)||parseFloat(te)<=parseFloat(u.iou_used))return he("IOU Allowance amount can not less than Used amount."),0;if(ue(!0),0!==te&&""!==te){var t=parseFloat(te);M.a.customerIOUmanage({change:t,typeid:1,busnessid:u.id}).then((function(e){console.log(e),be(!me),ae(""),ue(!1)})).catch((function(e){console.log(e),Object(B.a)(e),ue(!1)}))}else ue(!1)},autoComplete:"off",children:[Object(E.jsxs)(w.a,{style:{width:"70%"},children:[Object(E.jsx)(T.a,{style:{color:"red"},children:fe}),Object(E.jsx)(x.a,{placeholder:"Enter allowance amount",type:"number",id:"saveIOU",onChange:function(e){ae(e.target.value)}})]}),le?Object(E.jsx)(f.a.Ripple,{className:"ml-md-2",color:"primary",style:{height:"40px",marginTop:""===fe?"20px":"40px"},disabled:!0,children:Object(E.jsx)(k.a,{size:"sm"})}):Object(E.jsx)(f.a.Ripple,{className:"ml-md-2",style:{height:"40px",marginTop:""===fe?"20px":"40px"},color:"primary",type:"submit",children:Object(E.jsx)("span",{className:"align-middle ml-50",children:"Save"})})]}),Object(E.jsxs)("div",{className:"ml-1 p-2 mt-2 mb-2",style:{border:"1px solid lightgray",borderRadius:"5px",margin:"auto",fontWeight:"bold"},children:[Object(E.jsxs)("p",{children:["Customer ID : ",F]}),Object(E.jsxs)("p",{children:["Business Name : ",u.businessname?u.businessname:""]}),Object(E.jsxs)("p",{children:["Customer Name : ",u.customerinfo?"".concat(u.customerinfo.firstname," ").concat(u.customerinfo.lastname):""]}),Object(E.jsxs)("p",{children:["Allowance : ",window.CURRENCY_SYMBOL,(u.iou_limit?u.iou_limit:0).toFixed(2)]}),Object(E.jsxs)("p",{children:["Used : ",window.CURRENCY_SYMBOL,(u.iou_used?u.iou_used:0).toFixed(2)]}),Object(E.jsxs)("p",{children:["Remaining : ",window.CURRENCY_SYMBOL,Me.toFixed(2)]}),Object(E.jsxs)("p",{children:["Direct Debit Setup : ",we?null:ye?Object(E.jsx)(b.a,{color:"#4BB543"}):Object(E.jsx)(g.a,{color:"red"})]})]})]}),Object(E.jsxs)(N.a,{md:"7",children:[Object(E.jsx)(O.a,{className:"d-flex justify-content-between p-2",style:{width:"100%"},onSubmit:function(t){t.preventDefault();var a=oe.startdate,s=oe.enddate;J(!0),M.a.customerIOUsettingInfo({customerid:e,startdate:a,enddate:s}).then((function(e){J(!1),X(e.data.payload.ioulogs)})).catch((function(e){console.log(e),Object(B.a)(e),J(!1)}))},autoComplete:"off",children:Object(E.jsxs)(C.a,{style:{width:"100%"},children:[Object(E.jsxs)(N.a,{sm:"5",children:[Object(E.jsx)("span",{children:"From"}),Object(E.jsx)(x.a,{type:"date",id:"from",name:"startdate",required:!0,onChange:Se})]}),Object(E.jsxs)(N.a,{sm:"5",children:[Object(E.jsx)("span",{children:"To"}),Object(E.jsx)(x.a,{type:"date",id:"to",name:"enddate",required:!0,onChange:Se})]}),Object(E.jsx)(N.a,{sm:"2",children:Object(E.jsx)(f.a.Ripple,{color:"primary",type:"submit",style:{marginTop:"19px"},children:Object(E.jsx)("span",{className:"align-middle ml-50",children:"Submit"})})})]})}),Object(E.jsx)("div",{className:"mr-2",style:{border:"1px solid lightgray",borderRadius:"5px"},children:Object(E.jsx)(d.a,{noHeader:!0,pagination:!0,columns:Pe,paginationPerPage:3,className:"react-dataTable",sortIcon:Object(E.jsx)(j.a,{size:10}),paginationDefaultPage:W+1,paginationComponent:function(){var e;return Object(E.jsx)(l.a,(e={previousLabel:"",nextLabel:"",forcePage:W,onPageChange:function(e){return function(e){$(e.selected)}(e)},pageCount:V.length?V.length/3:1,breakLabel:"...",pageRangeDisplayed:2,marginPagesDisplayed:2,activeClassName:"active",pageClassName:"page-item",breakClassName:"page-item",breakLinkClassName:"page-link",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link"},Object(s.a)(e,"breakClassName","page-item"),Object(s.a)(e,"breakLinkClassName","page-link"),Object(s.a)(e,"containerClassName","pagination react-paginate separated-pagination pagination-sm justify-content-end pr-1 mt-1"),e))},data:V,progressPending:A,progressComponent:Object(E.jsx)(k.a,{color:"primary"}),responsive:!0})})]})]})]})]})}},456:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return r}));a(0);var s=a(121),n=function(e){try{var t=e.response;404===t.status||401===t.status||400===t.status||500===t.status?s.f.error(t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):s.f.error("The server is under maintenance",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){s.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},o=function(e){try{var t=e.response;404!==t.status&&401!==t.status&&400!==t.status||s.f.error(t.data.errors?t.data.errors[Object.keys(t.data.errors)[0]]:t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){s.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},r=function(e){var t=e.data.message||"success";s.f.success(t,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},461:function(e,t,a){"use strict";var s=a(14),n=a(20),o=a(0),r=a.n(o),c=a(5),i=a.n(c),l=a(56),u=a.n(l),d=a(78),p={tag:d.tagPropType,className:i.a.string,cssModule:i.a.object},m=function(e){var t=e.className,a=e.cssModule,o=e.tag,c=Object(n.a)(e,["className","cssModule","tag"]),i=Object(d.mapToCssModules)(u()(t,"card-title"),a);return r.a.createElement(o,Object(s.a)({},c,{className:i}))};m.propTypes=p,m.defaultProps={tag:"div"},t.a=m},465:function(e,t,a){"use strict";var s=a(14),n=a(20),o=a(0),r=a.n(o),c=a(5),i=a.n(c),l=a(56),u=a.n(l),d=a(78),p=i.a.oneOfType([i.a.number,i.a.string]),m={tag:d.tagPropType,noGutters:i.a.bool,className:i.a.string,cssModule:i.a.object,form:i.a.bool,xs:p,sm:p,md:p,lg:p,xl:p},b={tag:"div",widths:["xs","sm","md","lg","xl"]},g=function(e){var t=e.className,a=e.cssModule,o=e.noGutters,c=e.tag,i=e.form,l=e.widths,p=Object(n.a)(e,["className","cssModule","noGutters","tag","form","widths"]),m=[];l.forEach((function(t,a){var s=e[t];if(delete p[t],s){var n=!a;m.push(n?"row-cols-"+s:"row-cols-"+t+"-"+s)}}));var b=Object(d.mapToCssModules)(u()(t,o?"no-gutters":null,i?"form-row":"row",m),a);return r.a.createElement(c,Object(s.a)({},p,{className:b}))};g.propTypes=m,g.defaultProps=b,t.a=g},467:function(e,t,a){"use strict";var s=a(14),n=a(20),o=a(0),r=a.n(o),c=a(5),i=a.n(c),l=a(56),u=a.n(l),d=a(78),p=i.a.oneOfType([i.a.number,i.a.string]),m=i.a.oneOfType([i.a.bool,i.a.number,i.a.string,i.a.shape({size:i.a.oneOfType([i.a.bool,i.a.number,i.a.string]),order:p,offset:p})]),b={tag:d.tagPropType,xs:m,sm:m,md:m,lg:m,xl:m,className:i.a.string,cssModule:i.a.object,widths:i.a.array},g={tag:"div",widths:["xs","sm","md","lg","xl"]},j=function(e,t,a){return!0===a||""===a?e?"col":"col-"+t:"auto"===a?e?"col-auto":"col-"+t+"-auto":e?"col-"+a:"col-"+t+"-"+a},f=function(e){var t=e.className,a=e.cssModule,o=e.widths,c=e.tag,i=Object(n.a)(e,["className","cssModule","widths","tag"]),l=[];o.forEach((function(t,s){var n=e[t];if(delete i[t],n||""===n){var o=!s;if(Object(d.isObject)(n)){var r,c=o?"-":"-"+t+"-",p=j(o,t,n.size);l.push(Object(d.mapToCssModules)(u()(((r={})[p]=n.size||""===n.size,r["order"+c+n.order]=n.order||0===n.order,r["offset"+c+n.offset]=n.offset||0===n.offset,r)),a))}else{var m=j(o,t,n);l.push(m)}}})),l.length||l.push("col");var p=Object(d.mapToCssModules)(u()(t,l),a);return r.a.createElement(c,Object(s.a)({},i,{className:p}))};f.propTypes=b,f.defaultProps=g,t.a=f},475:function(e,t,a){"use strict";var s=a(14),n=a(20),o=a(117),r=a(116),c=a(0),i=a.n(c),l=a(5),u=a.n(l),d=a(56),p=a.n(d),m=a(78),b={children:u.a.node,inline:u.a.bool,tag:m.tagPropType,innerRef:u.a.oneOfType([u.a.object,u.a.func,u.a.string]),className:u.a.string,cssModule:u.a.object},g=function(e){function t(t){var a;return(a=e.call(this,t)||this).getRef=a.getRef.bind(Object(o.a)(a)),a.submit=a.submit.bind(Object(o.a)(a)),a}Object(r.a)(t,e);var a=t.prototype;return a.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},a.submit=function(){this.ref&&this.ref.submit()},a.render=function(){var e=this.props,t=e.className,a=e.cssModule,o=e.inline,r=e.tag,c=e.innerRef,l=Object(n.a)(e,["className","cssModule","inline","tag","innerRef"]),u=Object(m.mapToCssModules)(p()(t,!!o&&"form-inline"),a);return i.a.createElement(r,Object(s.a)({},l,{ref:c,className:u}))},t}(c.Component);g.propTypes=b,g.defaultProps={tag:"form"},t.a=g},477:function(e,t,a){"use strict";var s=a(14),n=a(20),o=a(0),r=a.n(o),c=a(5),i=a.n(c),l=a(56),u=a.n(l),d=a(78),p={tag:d.tagPropType,type:i.a.string,size:i.a.string,color:i.a.string,className:i.a.string,cssModule:i.a.object,children:i.a.string},m=function(e){var t=e.className,a=e.cssModule,o=e.type,c=e.size,i=e.color,l=e.children,p=e.tag,m=Object(n.a)(e,["className","cssModule","type","size","color","children","tag"]),b=Object(d.mapToCssModules)(u()(t,!!c&&"spinner-"+o+"-"+c,"spinner-"+o,!!i&&"text-"+i),a);return r.a.createElement(p,Object(s.a)({role:"status"},m,{className:b}),l&&r.a.createElement("span",{className:Object(d.mapToCssModules)("sr-only",a)},l))};m.propTypes=p,m.defaultProps={tag:"div",type:"border",children:"Loading..."},t.a=m},479:function(e,t,a){"use strict";var s=a(14),n=a(20),o=a(0),r=a.n(o),c=a(5),i=a.n(c),l=a(56),u=a.n(l),d=a(78),p=i.a.oneOfType([i.a.number,i.a.string]),m=i.a.oneOfType([i.a.bool,i.a.string,i.a.number,i.a.shape({size:p,order:p,offset:p})]),b={children:i.a.node,hidden:i.a.bool,check:i.a.bool,size:i.a.string,for:i.a.string,tag:d.tagPropType,className:i.a.string,cssModule:i.a.object,xs:m,sm:m,md:m,lg:m,xl:m,widths:i.a.array},g={tag:"label",widths:["xs","sm","md","lg","xl"]},j=function(e,t,a){return!0===a||""===a?e?"col":"col-"+t:"auto"===a?e?"col-auto":"col-"+t+"-auto":e?"col-"+a:"col-"+t+"-"+a},f=function(e){var t=e.className,a=e.cssModule,o=e.hidden,c=e.widths,i=e.tag,l=e.check,p=e.size,m=e.for,b=Object(n.a)(e,["className","cssModule","hidden","widths","tag","check","size","for"]),g=[];c.forEach((function(t,s){var n=e[t];if(delete b[t],n||""===n){var o,r=!s;if(Object(d.isObject)(n)){var c,i=r?"-":"-"+t+"-";o=j(r,t,n.size),g.push(Object(d.mapToCssModules)(u()(((c={})[o]=n.size||""===n.size,c["order"+i+n.order]=n.order||0===n.order,c["offset"+i+n.offset]=n.offset||0===n.offset,c))),a)}else o=j(r,t,n),g.push(o)}}));var f=Object(d.mapToCssModules)(u()(t,!!o&&"sr-only",!!l&&"form-check-label",!!p&&"col-form-label-"+p,g,!!g.length&&"col-form-label"),a);return r.a.createElement(i,Object(s.a)({htmlFor:m},b,{className:f}))};f.propTypes=b,f.defaultProps=g,t.a=f},567:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return r}));var s=function(e){return String(e).replace(/^(.{4})(.*)(.{3})$/,"$1 $2 $3")},n={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"},o=function(e){return new Date(e).toLocaleDateString(void 0,n)},r=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}}}]);
//# sourceMappingURL=183.a5333c1c.chunk.js.map