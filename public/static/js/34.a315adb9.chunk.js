(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[34],{1951:function(e,t,a){"use strict";a.r(t);var r=a(21),c=a(1),i=a(10),n=a(0),s=a(1185),l=a(498),o=a(471),d=a(476),u=a(475),j=a(463),p=a(472),b=a(473),m=a(1017),f=a(495),h=a(1044),O=a(1042),_=a(1043),g=a(518),x=a(474),y=a(1014),v=a(501),w=a(487),C=a(492),N=a(121),S=a(540),F=(a(496),a(497)),P=a(508),L=a.n(P),k=a(509),M=a.n(k),T=a(999),U=a(6);M()(L.a);t.default=function(){var e=Object(S.g)(),t=JSON.parse(localStorage.getItem("userData")).role,a=Object(n.useRef)(),P=Object(n.useRef)(),L=Object(n.useRef)(),k=Object(n.useRef)(),M=Object(n.useRef)(),D=Object(n.useRef)(),I=Object(n.useState)(!1),R=Object(i.a)(I,2),q=R[0],E=R[1],B=Object(n.useState)([]),H=Object(i.a)(B,2),A=H[0],V=H[1],z=Object(n.useState)({previewVisible:!1,previewImage:"",previewTitle:"",fileList:[]}),G=Object(i.a)(z,2),J=G[0],K=G[1],Q=Object(n.useState)([]),W=Object(i.a)(Q,2),X=W[0],Y=W[1],Z=Object(n.useState)({previewVisible:!1,previewImage:"",previewTitle:"",fileList:[]}),$=Object(i.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useState)([]),re=Object(i.a)(ae,2),ce=re[0],ie=re[1],ne=Object(n.useState)({previewVisible:!1,previewImage:"",previewTitle:"",fileList:[]}),se=Object(i.a)(ne,2),le=se[0],oe=se[1],de=Object(n.useState)([]),ue=Object(i.a)(de,2),je=ue[0],pe=ue[1],be=Object(n.useState)({previewVisible:!1,previewImage:"",previewTitle:"",fileList:[]}),me=Object(i.a)(be,2),fe=me[0],he=me[1],Oe=Object(n.useState)(!1),_e=Object(i.a)(Oe,2),ge=_e[0],xe=_e[1],ye=Object(n.useState)(""),ve=Object(i.a)(ye,2),we=ve[0],Ce=ve[1],Ne=Object(n.useState)(!1),Se=Object(i.a)(Ne,2),Fe=Se[0],Pe=Se[1],Le=Object(n.useState)([]),ke=Object(i.a)(Le,2),Me=ke[0],Te=ke[1],Ue=Object(n.useState)({property_rent:0,land_lord_id:"",branch_id:"",house_details:"",latitude:0,longitude:0,property_type:"",bed_room:"",bath_room:"",property_image:"",is_gas_certificate:!1,gas_certificate:"",gas_certificate_expire_date:null,is_power_certificate:!1,power_certificate:null,power_certificate_expire_date:null,is_property_insurence_certificate:!1,property_insurence_certificate:null,property_insurence_certificate_expire_date:null}),De=Object(i.a)(Ue,2),Ie=De[0],Re=De[1],qe=Object(n.useState)([]),Ee=Object(i.a)(qe,2),Be=Ee[0],He=Ee[1],Ae=Object(n.useState)([]),Ve=Object(i.a)(Ae,2),ze=Ve[0],Ge=Ve[1];Object(n.useEffect)((function(){C.a.BranchList().then((function(e){console.log(e.data.payload),He(e.data.payload)})).catch((function(e){Object(F.a)(e),console.log(e)})),C.a.landlordList().then((function(e){console.log("landlordList",e.data.payload),Ge(e.data.payload)})).catch((function(e){Object(F.a)(e),console.log(e)}))}),[]);var Je=function(e){Re(Object(c.a)(Object(c.a)({},Ie),{},Object(r.a)({},e.target.name,e.target.value)))};return Object(U.jsx)(n.Fragment,{children:Object(U.jsxs)(l.a,{style:{width:"100%"},onSubmit:function(a){if(a.preventDefault(),q)return N.f.error("please wait, image is uploading to the server"),0;if(!A.length)return N.f.error("please upload property image"),0;if(Ie.is_gas_certificate&&!X.length)return N.f.error("please upload your gas certificate"),0;if(Ie.is_power_certificate&&!ce.length)return N.f.error("please upload your power certificate"),0;if(Ie.is_property_insurence_certificate&&!je.length)return N.f.error("please upload your insurance certificate"),0;var r=Ie.property_rent,c=Ie.land_lord_id,i=Ie.branch_id,n=Ie.house_details,s=Ie.latitude,l=Ie.longitude,o=Ie.property_type,d=Ie.bed_room,u=Ie.bath_room,j=Ie.is_gas_certificate,p=Ie.gas_certificate_expire_date,b=Ie.is_power_certificate,m=Ie.power_certificate_expire_date,f=Ie.is_property_insurence_certificate,h=Ie.property_insurence_certificate_expire_date,O=A.length?A[0].url:null,_=j?X[0].url:null,g=b?ce[0].url:null,x=f?je[0].url:null,y=i||Be[0].id,v={property_rent:Number(r),land_lord_id:c,branch_id:y,house_details:n,latitude:s,longitude:l,property_type:o,bed_room:d,bath_room:u,property_image:O,gas_certificate:_,power_certificate:g,property_insurence_certificate:x,is_gas_certificate:j,gas_certificate_expire_date:p,is_power_certificate:b,power_certificate_expire_date:m,is_property_insurence_certificate:f,property_insurence_certificate_expire_date:h};console.log(v),xe(!0),C.a.createProperty(v).then((function(a){console.log(a),Object(F.b)(a),e.push("/".concat(t,"/MyProperty")),xe(!1)})).catch((function(e){Object(F.a)(e),xe(!1)}))},autoComplete:"off",children:[Object(U.jsxs)(o.a,{children:[Object(U.jsxs)(d.a,{className:"border-bottom",children:[Object(U.jsx)(u.a,{tag:"h4",children:"Create Property"}),Object(U.jsx)(u.a,{tag:"h4",children:Object(U.jsxs)(j.a.Ripple,{color:"primary",onClick:function(a){return e.push("/".concat(t,"/BulkPropertiesUpload"))},children:[Object(U.jsx)(s.a,{size:14,style:{marginTop:"-2px"}}),"\xa0",Object(U.jsx)("span",{children:"Bulk Create"})]})})]}),Object(U.jsxs)(p.a,{className:"row  pt-1",children:["EstateManager"!==t&&Object(U.jsx)(b.a,{md:"4",className:"mt-0",children:Object(U.jsxs)(m.a,{children:[Object(U.jsx)(f.a,{children:"Select a Branch"}),Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(v.a,{ref:L,theme:w.g,className:"react-select",classNamePrefix:"select",name:"branch_id",maxMenuHeight:150,onChange:function(e){Re(Object(c.a)(Object(c.a)({},Ie),{},{branch_id:e.value}))},options:Be.map((function(e){return{value:e.id,label:e.branch_name}})),isClearable:!1}),Object(U.jsx)(h.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return L.current.select.focus()},value:Ie.branch_id||"",onChange:function(e){return""}})]})," "]})}),Object(U.jsx)(b.a,{md:"4",className:"mt-0",children:Object(U.jsxs)(m.a,{children:[Object(U.jsx)(f.a,{children:"Select a Landlord"}),Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(v.a,{ref:k,theme:w.g,className:"react-select",classNamePrefix:"select",name:"land_lord_id",maxMenuHeight:150,onChange:function(e){Re(Object(c.a)(Object(c.a)({},Ie),{},{land_lord_id:e.value}))},options:ze.map((function(e){return{value:e.user_id,label:e.full_name}})),isClearable:!1}),Object(U.jsx)(h.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return k.current.select.focus()},value:Ie.land_lord_id||"",onChange:function(e){return""}})]})," "]})}),Object(U.jsx)(b.a,{md:"4",className:"mt-0",children:Object(U.jsxs)(m.a,{children:[Object(U.jsx)(f.a,{children:"Select Property Type"}),Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(v.a,{ref:M,theme:w.g,className:"react-select",classNamePrefix:"select",name:"property_type",maxMenuHeight:150,onChange:function(e){Re(Object(c.a)(Object(c.a)({},Ie),{},{property_type:e.value}))},options:["Flat","Semi-detach","Detach","Terraced","Bungalow","Park home"].map((function(e){return{value:e,label:e}})),isClearable:!1}),Object(U.jsx)(h.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return M.current.select.focus()},value:Ie.property_type||"",onChange:function(e){return""}})]})," "]})}),Object(U.jsx)(b.a,{md:"4",className:"mt-0",children:Object(U.jsxs)(m.a,{children:[Object(U.jsx)(f.a,{children:"Select How Many Bedroom"}),Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(v.a,{ref:P,theme:w.g,className:"react-select",classNamePrefix:"select",name:"bed_room",maxMenuHeight:150,onChange:function(e){Re(Object(c.a)(Object(c.a)({},Ie),{},{bed_room:e.value}))},options:[1,2,3,4,5,6,7,8,9,10].map((function(e){return{value:e,label:e}})),isClearable:!1}),Object(U.jsx)(h.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return P.current.select.focus()},value:Ie.bed_room||"",onChange:function(e){return""}})]})," "]})}),Object(U.jsx)(b.a,{md:"4",className:"mt-0",children:Object(U.jsxs)(m.a,{children:[Object(U.jsx)(f.a,{children:"Select How Many Bathroom"}),Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(v.a,{ref:a,maxMenuHeight:150,theme:w.g,className:"react-select",classNamePrefix:"select",name:"bath_room",onChange:function(e){Re(Object(c.a)(Object(c.a)({},Ie),{},{bath_room:e.value}))},options:[1,2,3,4,5].map((function(e){return{value:e,label:e}})),isClearable:!1}),Object(U.jsx)(h.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return a.current.select.focus()},value:Ie.bath_room||"",onChange:function(e){return""}})]})," "]})}),Object(U.jsx)(b.a,{md:"4",className:"mt-0",children:Object(U.jsxs)(m.a,{children:[Object(U.jsx)(f.a,{for:"property_rent",children:"Property Rent"}),Object(U.jsx)(h.a,{required:!0,type:"number",id:"property_rent",name:"property_rent",placeholder:"100",min:1,value:Ie.property_rent,onChange:Je})]})}),Object(U.jsxs)(b.a,{md:"6",children:[Object(U.jsx)(f.a,{for:"postcode",children:"Search address by Post Code"}),Object(U.jsxs)(O.a,{children:[Object(U.jsx)(h.a,{type:"text",id:"postcode",name:"postcode",placeholder:"enter a valid postcode",value:we,onChange:function(e){return Ce(e.target.value)}}),Object(U.jsx)(_.a,{addonType:"append",children:Object(U.jsx)(j.a,{color:"primary",outline:!0,type:"button",onClick:function(e){e.preventDefault(),Pe(!0),C.a.ukAddressEndpoint({postCode:we}).then((function(e){console.log(e.data.payload);var t=e.data.payload,a=t.latitude,r=t.longitude;Re(Object(c.a)(Object(c.a)({},Ie),{},{latitude:a,longitude:r})),Te(e.data.payload.addresses.map((function(e){return"".concat(e.building_number,", ").concat(e.thoroughfare,", ").concat(e.locality,", ").concat(e.town_or_city)}))),Pe(!1)})).catch((function(e){Te([]),Pe(!1),Object(F.a)(e)}))},children:Fe?Object(U.jsx)(g.a,{size:"sm"}):"Search"})})]})]}),Object(U.jsxs)(b.a,{md:"6",children:[Object(U.jsx)(f.a,{children:"Address"}),Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(v.a,{ref:D,theme:w.g,className:"react-select",maxMenuHeight:150,classNamePrefix:"select",name:"house_details",onChange:function(e){Re(Object(c.a)(Object(c.a)({},Ie),{},{house_details:e.value}))},options:Me.map((function(e){return{value:e,label:e}})),value:{value:Ie.house_details,label:Ie.house_details},isClearable:!1}),Object(U.jsx)(h.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return D.current.select.focus()},value:Ie.house_details||"",onChange:function(e){return""}})]})]}),Object(U.jsxs)(b.a,{md:"12",className:"my-0",children:[Object(U.jsx)(f.a,{children:"Property Image"}),Object(U.jsx)(T.a,{setimgUpLoading:E,state:J,setState:K,fileUrls:A,setFileUrls:V})]})]})]}),Object(U.jsxs)(x.a,{className:"match-height",children:[Object(U.jsx)(b.a,{md:"4",children:Object(U.jsx)(o.a,{children:Object(U.jsxs)(p.a,{children:[Object(U.jsx)(b.a,{md:"12",className:"mt-1",children:Object(U.jsx)(y.a,{type:"checkbox",className:"custom-control-Primary",id:"is_gas_certificate",onChange:function(e){return Re(Object(c.a)(Object(c.a)({},Ie),{},{is_gas_certificate:e.target.checked}))},checked:Ie.is_gas_certificate,label:"Gas Certified?"})}),Ie.is_gas_certificate&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(b.a,{md:"12",className:"mt-1",children:Object(U.jsxs)(m.a,{children:[Object(U.jsx)(f.a,{for:"gas_certificate_expire_date",children:"Gas Certificate Expire Date"}),Object(U.jsx)(h.a,{required:!0,type:"date",min:(new Date).toLocaleDateString("fr-CA"),id:"gas_certificate_expire_date",name:"gas_certificate_expire_date",placeholder:"100",value:Ie.gas_certificate_expire_date,onChange:Je})]})}),Object(U.jsxs)(b.a,{md:"12",className:"my-1",children:[Object(U.jsx)(f.a,{children:"Gas Certificate"}),Object(U.jsx)(T.a,{setimgUpLoading:E,state:ee,setState:te,fileUrls:X,setFileUrls:Y})]})]})]})})}),Object(U.jsx)(b.a,{md:"4",children:Object(U.jsx)(o.a,{children:Object(U.jsxs)(p.a,{children:[Object(U.jsx)(b.a,{md:"12",className:"mt-1",children:Object(U.jsx)(y.a,{type:"checkbox",className:"custom-control-Primary",id:"is_power_certificate",onChange:function(e){return Re(Object(c.a)(Object(c.a)({},Ie),{},{is_power_certificate:e.target.checked}))},checked:Ie.is_power_certificate,label:"Power Certified?"})}),Ie.is_power_certificate&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(b.a,{md:"12",className:"mt-1",children:Object(U.jsxs)(m.a,{children:[Object(U.jsx)(f.a,{for:"power_certificate_expire_date",children:"Power Certificate Expire Date"}),Object(U.jsx)(h.a,{required:!0,type:"date",min:(new Date).toLocaleDateString("fr-CA"),id:"power_certificate_expire_date",name:"power_certificate_expire_date",placeholder:"100",value:Ie.power_certificate_expire_date,onChange:Je})]})}),Object(U.jsxs)(b.a,{md:"12",className:"my-1",children:[Object(U.jsx)(f.a,{children:"Power Certificate"}),Object(U.jsx)(T.a,{setimgUpLoading:E,state:le,setState:oe,fileUrls:ce,setFileUrls:ie})]})]})]})})}),Object(U.jsx)(b.a,{md:"4",children:Object(U.jsx)(o.a,{children:Object(U.jsxs)(p.a,{children:[Object(U.jsx)(b.a,{md:"12",className:"mt-1",children:Object(U.jsx)(y.a,{type:"checkbox",className:"custom-control-Primary",id:"is_property_insurence_certificate",onChange:function(e){return Re(Object(c.a)(Object(c.a)({},Ie),{},{is_property_insurence_certificate:e.target.checked}))},checked:Ie.is_property_insurence_certificate,label:"Insurance Certified?"})}),Ie.is_property_insurence_certificate&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(b.a,{md:"12",className:"mt-1",children:Object(U.jsxs)(m.a,{children:[Object(U.jsx)(f.a,{for:"property_insurence_certificate_expire_date",children:"Insurance Certificate Expire Date"}),Object(U.jsx)(h.a,{required:!0,type:"date",min:(new Date).toLocaleDateString("fr-CA"),id:"property_insurence_certificate_expire_date",name:"property_insurence_certificate_expire_date",placeholder:"100",value:Ie.property_insurence_certificate_expire_date,onChange:Je})]})}),Object(U.jsxs)(b.a,{md:"12",className:"my-1",children:[Object(U.jsx)(f.a,{children:"Insurance Certificate"}),Object(U.jsx)(T.a,{setimgUpLoading:E,state:fe,setState:he,fileUrls:je,setFileUrls:pe})]})]})]})})})]}),Object(U.jsx)(o.a,{children:Object(U.jsx)(x.a,{children:Object(U.jsx)(b.a,{md:"12 text-center",children:Object(U.jsx)(j.a.Ripple,{className:"my-1",color:"primary",type:"submit",disabled:ge,children:ge?Object(U.jsx)(g.a,{size:"sm"}):"Submit"})})})})]})})}},471:function(e,t,a){"use strict";var r=a(15),c=a(20),i=a(0),n=a.n(i),s=a(5),l=a.n(s),o=a(58),d=a.n(o),u=a(80),j={tag:u.tagPropType,inverse:l.a.bool,color:l.a.string,body:l.a.bool,outline:l.a.bool,className:l.a.string,cssModule:l.a.object,innerRef:l.a.oneOfType([l.a.object,l.a.string,l.a.func])},p=function(e){var t=e.className,a=e.cssModule,i=e.color,s=e.body,l=e.inverse,o=e.outline,j=e.tag,p=e.innerRef,b=Object(c.a)(e,["className","cssModule","color","body","inverse","outline","tag","innerRef"]),m=Object(u.mapToCssModules)(d()(t,"card",!!l&&"text-white",!!s&&"card-body",!!i&&(o?"border":"bg")+"-"+i),a);return n.a.createElement(j,Object(r.a)({},b,{className:m,ref:p}))};p.propTypes=j,p.defaultProps={tag:"div"},t.a=p},474:function(e,t,a){"use strict";var r=a(15),c=a(20),i=a(0),n=a.n(i),s=a(5),l=a.n(s),o=a(58),d=a.n(o),u=a(80),j=l.a.oneOfType([l.a.number,l.a.string]),p={tag:u.tagPropType,noGutters:l.a.bool,className:l.a.string,cssModule:l.a.object,form:l.a.bool,xs:j,sm:j,md:j,lg:j,xl:j},b={tag:"div",widths:["xs","sm","md","lg","xl"]},m=function(e){var t=e.className,a=e.cssModule,i=e.noGutters,s=e.tag,l=e.form,o=e.widths,j=Object(c.a)(e,["className","cssModule","noGutters","tag","form","widths"]),p=[];o.forEach((function(t,a){var r=e[t];if(delete j[t],r){var c=!a;p.push(c?"row-cols-"+r:"row-cols-"+t+"-"+r)}}));var b=Object(u.mapToCssModules)(d()(t,i?"no-gutters":null,l?"form-row":"row",p),a);return n.a.createElement(s,Object(r.a)({},j,{className:b}))};m.propTypes=p,m.defaultProps=b,t.a=m},999:function(e,t,a){"use strict";var r=a(122),c=a(511),i=a.n(c),n=a(516),s=a(1),l=(a(0),a(849)),o=a(1891),d=(a(542),a(121)),u=a(492),j=a(1074),p=a(497),b=a(496),m=a(6);t.a=function(e){var t=e.fileUrls,a=e.setFileUrls,c=e.state,f=e.setState,h=e.setimgUpLoading;function O(e){return new Promise((function(t,a){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result)},r.onerror=function(e){return a(e)}}))}var _=c.previewVisible,g=c.previewImage,x=c.fileList,y=c.previewTitle,v=function(){var e=Object(n.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,O(t.originFileObj);case 3:t.preview=e.sent;case 4:f(Object(s.a)(Object(s.a)({},c),{},{previewImage:t.url||t.preview,previewVisible:!0,previewTitle:t.name||t.url.substring(t.url.lastIndexOf("/")+1)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=Object(m.jsxs)("div",{className:"text-center p-1",style:{height:"102px",width:"102px"},children:[Object(m.jsx)("span",{children:Object(m.jsx)(j.a,{size:20,className:"my-1"})})," ",Object(m.jsx)("br",{}),Object(m.jsx)("span",{children:"Add Image"})]}),C={beforeUpload:function(e){var c=e.size/1024/1024<2,i="image/jpeg"===e.type||"image/png"===e.type;if(i){if(c){var n=new FormData;return n.append("complain_image",e),h(!0),u.a.singleFileupload(n).then((function(c){h(!1),a([].concat(Object(r.a)(t),[{uid:e.uid,name:"image.png",status:"done",type:"image/jpeg",url:c.data.payload.fileurl}]))})).catch((function(e){h(!1),console.log(e),Object(p.a)(e)})),i&&c}d.f.error("Image must smaller than 2MB!")}else d.f.error("".concat(e.name," is not a Image file"))}};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(l.a,Object(s.a)(Object(s.a)({},C),{},{action:"".concat(b.d,"/api/fackupload"),listType:"picture-card",fileList:x,onPreview:v,onChange:function(e){var r=e.fileList,i=e.file;return i.size/1024/1024>2?0:"image/jpeg"===i.type||"image/png"===i.type?(a(t.filter((function(e){return r.some((function(t){return e.uid===t.uid}))}))),void f(Object(s.a)(Object(s.a)({},c),{},{fileList:r.filter((function(e){return e.type.includes("image")}))}))):0},children:x.length>=1?null:w})),Object(m.jsx)(o.a,{visible:_,title:y,footer:null,onCancel:function(){return f(Object(s.a)(Object(s.a)({},c),{},{previewVisible:!1}))},children:Object(m.jsx)("img",{alt:"example",style:{width:"100%"},src:g})})]})}}}]);
//# sourceMappingURL=34.a315adb9.chunk.js.map